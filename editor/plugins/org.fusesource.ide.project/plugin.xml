<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<extension id="RiderProjectNature" name="JBoss Fuse Nature" point="org.eclipse.core.resources.natures">
      <runtime>
         <run class="org.fusesource.ide.project.RiderProjectNature">
         </run>
      </runtime>
      <content-type
            id="org.fusesource.ide.project.camelNatureContentType">
      </content-type>
      <builder
            id="org.fusesource.ide.project.RiderProjectBuilder">
      </builder>
	</extension>
	<extension point="org.eclipse.ui.ide.projectNatureImages">
      <image icon="icons/fuse_icon_16c.png" id="org.fusesource.ide.project.RiderProjectNature.icon" natureId="org.fusesource.ide.project.RiderProjectNature"/>
	</extension>
 <extension
       id="org.fusesource.ide.project.RiderProjectBuilder"
       point="org.eclipse.core.resources.builders">
    <builder
          callOnEmptyDelta="false"
          hasNature="true"
          isConfigurable="false"
          supportsConfigurations="false">
       <run
             class="org.fusesource.ide.project.RiderProjectBuilder">
       </run>
    </builder>
 </extension>
 
 <extension
      point="org.eclipse.ui.navigator.navigatorContent">
	   <navigatorContent
	         id="org.fusesource.ide.camelContent"
	         activeByDefault="true"
	         contentProvider="org.fusesource.ide.project.providers.CamelFilesContentProvider"
	         icon="icons/fuse_icon_16c.png"
	         labelProvider="org.fusesource.ide.project.providers.CamelFilesLabelProvider"
	         name="Camel Contexts"
	         priority="highest">
	      <triggerPoints>
          <or>
               <instanceof value="org.eclipse.jdt.core.IJavaProject" />
               <instanceof
                     value="org.eclipse.core.resources.IProject">
               </instanceof>
            </or>
	      </triggerPoints>
	      <possibleChildren>
             <and>
                <adapt type="org.eclipse.core.resources.IFile">
                    <test
                          property="org.eclipse.core.resources.contentTypeId"
                          value="org.fusesource.ide.project.camelNatureContentType">
                    </test>
                 </adapt>
             </and>
          </possibleChildren>
       <enablement>
          <and>
             <instanceof
                   value="org.eclipse.core.resources.IProject">
             </instanceof>
             <test
                   forcePluginActivation="true"
                   property="org.eclipse.core.resources.projectNature"
                   value="org.fusesource.ide.project.RiderProjectNature">
             </test>
             <test
                   forcePluginActivation="true"
                   property="org.fusesource.ide.project.CamelNatureTester.hasChildren"
                   value="true">
             </test>
          </and>
       </enablement>
       <actionProvider
             class="org.fusesource.ide.project.providers.VirtualCamelNodesActionProvider"
             id="org.fusesource.ide.project.navigator.actionProvider">
          <enablement>
             <or>
                <instanceof
                      value="org.fusesource.ide.project.providers.CamelVirtualFolder">
                </instanceof>
             </or>
          </enablement>
       </actionProvider>
	   </navigatorContent>
	</extension>
	
	<extension
	      point="org.eclipse.ui.navigator.viewer">
	   <viewerContentBinding
	         viewerId="org.eclipse.jdt.ui.PackageExplorer">
	      <includes>
	         <contentExtension
	               isRoot="false"
	               pattern="org.fusesource.ide.camelContent">
	         </contentExtension>
	      </includes>
	   </viewerContentBinding>
	   <viewerContentBinding
	         viewerId="org.eclipse.ui.navigator.ProjectExplorer">
	      <includes>
	         <contentExtension
	               isRoot="false"
	               pattern="org.fusesource.ide.camelContent">
	         </contentExtension>
	      </includes>
	   </viewerContentBinding>
	</extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.ui.popup.any?before=additions">
       <command
             commandId="org.fusesource.ide.project.DisableCamelNatureCmd"
             label="Disable Fuse Camel Nature"
             style="push">
          <visibleWhen
                checkEnabled="false">
                <with
                variable="selection">
                                <iterate
                                      ifEmpty="false"
                                      operator="and">
                                   <test
                                         forcePluginActivation="true"
                                         property="org.fusesource.ide.project.CamelNatureTester.camelNatureEnabled">
                                   </test>
                                   <test
                                         forcePluginActivation="true"
                                         property="org.fusesource.ide.project.CamelNatureTester.projectOpen">
                                   </test>
                                </iterate>
          </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.fusesource.ide.project.EnableCamelNatureCmd"
             label="Enable Fuse Camel Nature"
             style="push">
          <visibleWhen
                checkEnabled="false">
                <with
                variable="selection">
                <iterate
                      ifEmpty="false"
                      operator="and">
                   <test
                         forcePluginActivation="true"
                         property="org.fusesource.ide.project.CamelNatureTester.camelNatureDisabled">
                   </test>
                   <test
                         forcePluginActivation="true"
                         property="org.fusesource.ide.project.CamelNatureTester.projectOpen">
                   </test>
                </iterate>
          </with>
          </visibleWhen>
       </command>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.commands">
    <command
          id="org.fusesource.ide.project.EnableCamelNatureCmd"
          name="Enable Fuse Camel Nature">
    </command>
    <command
          id="org.fusesource.ide.project.DisableCamelNatureCmd"
          name="Disable Fuse Camel Nature">
    </command>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="org.fusesource.ide.project.handlers.EnableCamelNatureHandler"
          commandId="org.fusesource.ide.project.EnableCamelNatureCmd">
    </handler>
    <handler
          class="org.fusesource.ide.project.handlers.DisableCamelNatureHandler"
          commandId="org.fusesource.ide.project.DisableCamelNatureCmd">
    </handler>
 </extension>
 <extension
       point="org.eclipse.core.expressions.propertyTesters">
    <propertyTester
          class="org.fusesource.ide.project.CamelNatureTester"
          id="org.fusesource.ide.project.CamelNatureTester"
          namespace="org.fusesource.ide.project.CamelNatureTester"
          properties="camelNatureEnabled,camelNatureDisabled,projectOpen,hasChildren"
          type="org.eclipse.core.resources.IProject">
    </propertyTester>
 </extension>
 <extension
       point="org.eclipse.wst.server.core.moduleFactories">
    <moduleFactory
          class="org.fusesource.ide.project.integration.CamelModuleFactory"
          id="org.fusesource.ide.project.fuseModuleFactory">
       <moduleType
             types="fuse.camel"
             versions="1.0">
       </moduleType>
    </moduleFactory>
 </extension>
 <extension
       point="org.eclipse.wst.server.core.moduleTypes">
    <moduleType
          id="fuse.camel"
          name="Apache Camel Context">
    </moduleType>
 </extension>
 <extension
       point="org.eclipse.wst.server.ui.serverImages">
    <image
          icon="icons/fuse_icon_16c.png"
          id="org.fusesource.ide.project.image"
          typeIds="fuse.camel"/>
 </extension>
</plugin>
