<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Spring LDAP Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="spring-integration-component.html" title="Spring Integration Component"><link rel="next" href="spring-redis-component.html" title="Spring Redis Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="spring-ldap-component"></a>Spring LDAP Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="spring-ldap-component.html#_uri_format_188">URI format</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_options_140">Options</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_usage_99">Usage</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.11</strong></span></p><p>The <span class="strong"><strong>spring-ldap:</strong></span> component provides a Camel wrapper for
<a class="link" href="http://www.springsource.org/ldap" target="_top">Spring LDAP</a>.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-spring-ldap<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_188"></a>URI format</h2></div></div></div><pre class="programlisting">spring-ldap:springLdapTemplate[?options]</pre><p>Where <span class="strong"><strong>springLdapTemplate</strong></span> is the name of the
<a class="link" href="http://static.springsource.org/spring-ldap/site/apidocs/org/springframework/ldap/core/LdapTemplate.html" target="_top">Spring
LDAP Template bean</a>. In this bean, you configure the URL and the
credentials for your LDAP access.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_140"></a>Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="spring-ldap-component.html#_path_parameters_1_parameters_165">Path Parameters (1 parameters):</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_query_parameters_3_parameters_4">Query Parameters (3 parameters):</a></span></dt></dl></div><p>The Spring LDAP component has no options.</p><p>The Spring LDAP endpoint is configured using URI syntax:</p><pre class="screen">spring-ldap:templateName</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_1_parameters_165"></a>Path Parameters (1 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>templateName</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Name of the Spring LDAP Template bean</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_3_parameters_4"></a>Query Parameters (3 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>operation</strong></span> (producer)</p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The LDAP operation to be performed.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>LdapOperation</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>scope</strong></span> (producer)</p></td><td align="left" valign="top"><p>The scope of the search operation.</p></td><td align="center" valign="top"><p>subtree</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_usage_99"></a>Usage</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="spring-ldap-component.html#_search">Search</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_bind">Bind</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_unbind">Unbind</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_authenticate">Authenticate</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_modify_attributes">Modify Attributes</a></span></dt><dt><span class="section"><a href="spring-ldap-component.html#_function_driven">Function-Driven</a></span></dt></dl></div><p>The component supports producer endpoint only. An attempt to create a
consumer endpoint will result in an <code class="literal">UnsupportedOperationException</code>.
 The body of the message must be a map (an instance of <code class="literal">java.util.Map</code>).
Unless a base DN is specified by in the configuration of your ContextSource,
this map must contain at least an entry with the key <span class="strong"><strong><code class="literal">dn</code></strong></span> (not needed for function_driven operation) that
specifies the root node for the LDAP operation to be performed. Other
entries of the map are operation-specific (see below).</p><p>The body of the message remains unchanged for the <code class="literal">bind</code> and <code class="literal">unbind</code>
operations. For the <code class="literal">search</code> and <code class="literal">function_driven</code> operations, the body is set to the result of
the search, see
<a class="link" href="http://static.springsource.org/spring-ldap/site/apidocs/org/springframework/ldap/core/LdapTemplate.html#search%28java.lang.String,%20java.lang.String,%20int,%20org.springframework.ldap.core.AttributesMapper%29" target="_top">http://static.springsource.org/spring-ldap/site/apidocs/org/springframework/ldap/core/LdapTemplate.html#search%28java.lang.String,%20java.lang.String,%20int,%20org.springframework.ldap.core.AttributesMapper%29</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_search"></a>Search</h3></div></div></div><p>The message body must have an entry with the key <span class="strong"><strong><code class="literal">filter</code></strong></span>. The value
must be a <code class="literal">String</code> representing a valid LDAP filter, see
<a class="link" href="http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol#Search_and_Compare" target="_top">http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol#Search_and_Compare</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_bind"></a>Bind</h3></div></div></div><p>The message body must have an entry with the key <span class="strong"><strong><code class="literal">attributes</code></strong></span>. The
value must be an instance of
<a class="link" href="http://docs.oracle.com/javase/6/docs/api/javax/naming/directory/Attributes.html" target="_top">javax.naming.directory.Attributes</a>
This entry specifies the LDAP node to be created.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_unbind"></a>Unbind</h3></div></div></div><p>No further entries necessary, the node with the specified <span class="strong"><strong><code class="literal">dn</code></strong></span> is
deleted.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_authenticate"></a>Authenticate</h3></div></div></div><p>The message body must have entries with the keys <span class="strong"><strong><code class="literal">filter</code></strong></span> and  <span class="strong"><strong><code class="literal">password</code></strong></span>. The
values must be an instance of <code class="literal">String</code> representing a valid LDAP filter and a user password, respectively.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_modify_attributes"></a>Modify Attributes</h3></div></div></div><p>The message body must have an entry with the key <span class="strong"><strong><code class="literal">modificationItems</code></strong></span>. The
value must be an instance of any array of type
<a class="link" href="http://docs.oracle.com/javase/6/docs/api/javax/naming/directory/ModificationItem.html" target="_top">javax.naming.directory.ModificationItem</a></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_function_driven"></a>Function-Driven</h3></div></div></div><p>The message body must have entries with the keys <span class="strong"><strong><code class="literal">function</code></strong></span> and <span class="strong"><strong><code class="literal">request</code></strong></span>. The <span class="strong"><strong><code class="literal">function</code></strong></span> value must be of type <code class="literal">java.util.function.BiFunction&lt;L, Q, S&gt;</code>. The <code class="literal">L</code> type parameter must be of type <code class="literal">org.springframework.ldap.core.LdapOperations</code>. The <span class="strong"><strong><code class="literal">request</code></strong></span> value must be the same type as the <code class="literal">Q</code> type parameter in the <span class="strong"><strong><code class="literal">function</code></strong></span> and it must encapsulate the parameters expected by the LdapTemplate method being invoked within the <span class="strong"><strong><code class="literal">function</code></strong></span>. The <code class="literal">S</code> type parameter represents the response type as returned by the LdapTemplate method being invoked.
This operation allows dynamic invocation of LdapTemplate methods that are not covered by the operations mentioned above.</p><p><span class="strong"><strong>Key definitions</strong></span></p><p>In order to avoid spelling errors, the following constants are defined
in <code class="literal">org.apache.camel.springldap.SpringLdapProducer</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">public static final String DN = "dn"</li><li class="listitem">public static final String FILTER = "filter"</li><li class="listitem">public static final String ATTRIBUTES = "attributes"</li><li class="listitem">public static final String PASSWORD = "password";</li><li class="listitem">public static final String MODIFICATION_ITEMS = "modificationItems";</li><li class="listitem">public static final String FUNCTION = "function";</li><li class="listitem">public static final String REQUEST = "request";</li></ul></div></div></div></div></body></html>