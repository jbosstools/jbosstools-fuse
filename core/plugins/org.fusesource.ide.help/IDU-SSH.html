<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>SSH</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-SQLStored.html" title="SQL Stored Procedure"><link rel="next" href="IDU-StAX.html" title="StAX"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-SSH"></a>SSH</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_SSH"></a>SSH</h2></div></div></div><p><span class="bold"><strong>Available as of Camel 2.10</strong></span>
    </p><p>The SSH component enables access to SSH servers such that you can send an SSH command, and process the response.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code> for this component:</p><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-ssh&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_URIformat"></a>URI format</h2></div></div></div><p></p><pre class="programlisting">ssh:[username[:password]@]host[:port][?options]</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_Options"></a>Options</h2></div></div></div><p></p><table id="d0e170235"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Description </th>
      </tr><tr>
        <td>
          <code class="code">host</code>
        </td>
        <td></td>
        <td> Hostname of SSH Server </td>
      </tr><tr>
        <td>
          <code class="code">port</code>
        </td>
        <td><code class="literal">22</code>
        </td>
        <td> Port of the SSH Server </td>
      </tr><tr>
        <td>
          <code class="code">username</code>
        </td>
        <td></td>
        <td> Username used for authenticating with SSH Server. </td>
      </tr><tr>
        <td>
          <code class="code">password</code>
        </td>
        <td></td>
        <td> Password used for authenticating with SSH Server. Used if <code class="literal">keyPairProvider</code> is null. </td>
      </tr><tr>
        <td>
          <code class="code">keyPairProvider</code>
        </td>
        <td></td>
        <td> Refers to a <code class="literal">org.apache.sshd.common.KeyPairProvider</code> to use for loading keys for authentication. If this option is used, then <code class="literal">password</code> is not used. </td>
      </tr><tr>
        <td>
          <code class="code">keyType</code>
        </td>
        <td>
          <code class="code">ssh-rsa</code>
        </td>
        <td> Refers to a key type to load from <code class="literal">keyPairProvider</code>. The key types can for example be "ssh-rsa" or "ssh-dss". </td>
      </tr><tr>
        <td><code class="literal">certResource</code>
        </td>
        <td><code class="literal">null</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11:</strong></span> Path reference to a public key certificate. Prefix path with <code class="literal">classpath:</code>, <code class="literal">file:</code>, or <code class="literal">http:</code>. </td>
      </tr><tr>
        <td><span class="del"><code class="literal">certFilename</code></span>
        </td>
        <td><code class="literal">null</code>
        </td>
        <td><span class="bold"><strong>@deprecated:</strong></span> Use <code class="literal">certResource</code> instead. Refers to a filename to use within file based <code class="literal">keyPairProvider</code>. </td>
      </tr><tr>
        <td><code class="literal">timeout</code>
        </td>
        <td><code class="literal">30000</code>
        </td>
        <td> Milliseconds to wait beforing timing out connection to SSH Server. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_ConsumerOnlyOptions"></a>Consumer Only Options</h2></div></div></div><p></p><p>
      
    </p><table id="d0e170418"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Description </th>
      </tr><tr>
        <td>
          <code class="code">initialDelay</code>
        </td>
        <td><code class="literal">1000</code>
        </td>
        <td> Milliseconds before polling the SSH server starts. </td>
      </tr><tr>
        <td>
          <code class="code">delay</code>
        </td>
        <td><code class="literal">500</code>
        </td>
        <td> Milliseconds before the next poll of the SSH Server. </td>
      </tr><tr>
        <td>
          <code class="code">useFixedDelay</code>
        </td>
        <td><code class="literal">true</code>
        </td>
        <td> Controls if fixed delay or fixed rate is used. See <code class="code">ScheduledExecutorService</code> in JDK for details. </td>
      </tr><tr>
        <td>
          <code class="code">pollCommand</code>
        </td>
        <td><code class="literal">null</code></td>
        <td> Command to send to SSH Server during each poll cycle. You may need to end your command with a newline, and that must be URL encoded <code class="literal">%0A</code>. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_UsageasaProducerendpoint"></a>Usage as a Producer endpoint</h2></div></div></div><p></p><p>When the SSH Component is used as a Producer (<code class="literal">.to("ssh://...")</code>), it will send the message body as the command to execute on the remote SSH server.</p><p>Here is an example of this within the XML DSL. Note that the command has an XML encoded newline (<code class="literal">&amp;10;</code>).</p><pre class="programlisting">
&lt;route id="camel-example-ssh-producer"&gt;
  &lt;from uri="direct:exampleSshProducer"/&gt;
  &lt;setBody&gt;
    &lt;constant&gt;features:list&amp;#10;&lt;/constant&gt;
  &lt;/setBody&gt;
  &lt;to uri="ssh://karaf:karaf@localhost:8101"/&gt;
  &lt;log message="${body}"/&gt;
&lt;/route&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_Authentication"></a>Authentication</h2></div></div></div><p></p><p>The SSH Component can authenticate against the remote SSH server using one of two mechanisms: Public Key certificate or username/password. Configuring how the SSH Component does authentication is based on how and which options are set.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p></p><p>First, it will look to see if the <code class="literal">certResource</code> option has been set, and if so, use it to locate the referenced Public Key certificate and use that for authentication.</p></li><li class="listitem"><p></p><p>If <code class="literal">certResource</code> is not set, it will look to see if a <code class="literal">keyPairProvider</code> has been set, and if so, it will use that to for certificate based authentication.</p></li><li class="listitem"><p></p><p>If neither <code class="literal">certResource</code> nor <code class="literal">keyPairProvider</code> are set, it will use the <code class="literal">username</code> and <code class="literal">password</code> options for authentication.</p></li></ol></div><p>The following route fragment shows an SSH polling consumer using a certificate from the classpath.</p><p>In the XML DSL,</p><pre class="programlisting">
&lt;route&gt;
  &lt;from uri="ssh://scott@localhost:8101?certResource=classpath:test_rsa&amp;seFixedDelay=true&amp;elay=5000&amp;ollCommand=features:list%0A"/&gt;
  &lt;log message="${body}"/&gt;
&lt;/route&gt;
</pre><p>In the Java DSL,</p><pre class="programlisting">
from("ssh://scott@localhost:8101?certResource=classpath:test_rsa&amp;useFixedDelay=true&amp;delay=5000&amp;pollCommand=features:list%0A")
    .log("${body}");
</pre><p>An example of using Public Key authentication is provided in <code class="literal">examples/camel-example-ssh-security</code>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_CertificateDependencies"></a>Certificate Dependencies</h2></div></div></div><p></p><p>You will need to add some additional runtime dependencies if you use certificate based authentication. The dependency versions shown are as of Camel 2.11, you may need to use later versions depending what version of Camel you are using.</p><pre class="programlisting">
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.sshd&lt;/groupId&gt;
  &lt;artifactId&gt;sshd-core&lt;/artifactId&gt;
  &lt;version&gt;0.8.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;
  &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;
  &lt;version&gt;1.47&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;
  &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;
  &lt;version&gt;1.47&lt;/version&gt;
&lt;/dependency&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-SSH_HSH_Example"></a>Example</h2></div></div></div><p>See the <code class="literal">examples/camel-example-ssh</code> and <code class="literal">examples/camel-example-ssh-security</code> in the Camel distribution.</p><p>

    </p></div></div></body></html>