<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Geocoder</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-gtask.html" title="gtask"><link rel="next" href="IDU-Git.html" title="Git"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Geocoder"></a>Geocoder</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Geocoder_HSH_GeocoderComponent"></a>Geocoder Component</h2></div></div></div><p><span class="bold"><strong>Available as of Camel 2.12</strong></span>
        </p><p>The <span class="bold"><strong>geocoder:</strong></span> component is used for looking up
            geocodes (latitude and longitude) for a given address, or reverse lookup. The component
            uses the <a class="link" href="https://code.google.com/p/geocoder-java/" target="_top">Java API for Google
                Geocoder</a> library.</p><p>Maven users will need to add the following dependency to their
                <code class="literal">pom.xml</code> for this component:</p><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-geocoder&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Geocoder_HSH_URIformat"></a>URI format</h2></div></div></div><p></p><pre class="programlisting">geocoder:address:name[?options]
geocoder:latlng:latitude,longitude[?options]</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Geocoder_HSH_Options"></a>Options</h2></div></div></div><p></p><p>

    </p><table id="d0e89961"><tr>
        <th> Property</th>
        <th>Default </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">language</code>
        </td>
        <td><code class="literal">en</code>
        </td>
        <td> The language to use. </td>
      </tr><tr>
        <td><code class="literal">headersOnly</code>
        </td>
        <td><code class="literal">false</code>
        </td>
        <td> Whether to only enrich the <a class="link" href="Exchange" target="_top">Exchange</a> with headers, and leave the body as-is. </td>
      </tr><tr>
        <td><code class="literal">clientId</code>
        </td>
        <td></td>
        <td> To use google premium with this client id </td>
      </tr><tr>
        <td><code class="literal">clientKey</code>
        </td>
        <td></td>
        <td> To use google premium with this client key </td>
      </tr><tr>
                <td><code class="literal">httpClientConfigurer</code>
                </td>
                <td><code class="code">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> Reference to a
                        <code class="code">org.apache.camel.component.geocoder.http.HttpClientConfigurer</code>
                    in the Registry.</td>
            </tr><tr>
                <td><code class="literal">clientConnectionManager</code>
                </td>
                <td><code class="code">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> To use a custom
                        <code class="code">org.apache.http.conn.ClientConnectionManager</code>.</td>
            </tr></table><p>You can append query options to the URI in the following format, <code class="literal">?option=value&amp;option=value&amp;...</code>
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e90073"></a>Proxy</h2></div></div></div><p>The following proxy options can also be set on a Geocoder endpoint:</p><table id="d0e90078"><tr>
                <th> Property</th>
                <th>Default </th>
                <th> Description </th>
            </tr><tr>
                <td><code class="literal">proxyHost</code>
                </td>
                <td><code class="literal">null</code>
                </td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> The proxy host name. </td>
            </tr><tr>
                <td><code class="literal">proxyPort</code>
                </td>
                <td><code class="literal">null</code>
                </td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> The proxy port number.</td>
            </tr><tr>
                <td><code class="literal">proxyAuthMethod</code>
                </td>
                <td><code class="literal">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> Authentication method for proxy,
                    either as <code class="code">Basic</code>, <code class="code">Digest</code> or <code class="code">NTLM</code>.</td>
            </tr><tr>
                <td><code class="literal">proxyAuthUsername</code>
                </td>
                <td><code class="literal">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> Username for proxy
                    authentication.</td>
            </tr><tr>
                <td><code class="literal">proxyAuthPassword</code>
                </td>
                <td><code class="code">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> Passwprd for proxy
                    authentication.</td>
            </tr><tr>
                <td><code class="literal">proxyAuthDomain</code>
                </td>
                <td><code class="code">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> Domain for proxy NTML
                    authentication.</td>
            </tr><tr>
                <td><code class="literal">proxyAuthHost</code>
                </td>
                <td><code class="code">null</code></td>
                <td><span class="bold"><strong>Camel 2.17:</strong></span> Optional host for proxy NTML
                    authentication.</td>
            </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Geocoder_HSH_Exchangedataformat"></a>Exchange data format</h2></div></div></div><p>Camel will deliver the body as a
                <code class="literal">com.google.code.geocoder.model.GeocodeResponse</code> type. And if the
            address is <code class="literal">"current"</code> then the response is a String type with a JSON
            representation of the current location.</p><p>If the option <code class="literal">headersOnly</code> is set to <code class="literal">true</code> then
            the message body is left as-is, and only headers will be added to the <a class="link" href="Exchange" target="_top">Exchange</a>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Geocoder_HSH_MessageHeaders"></a>Message Headers</h2></div></div></div><p></p><p>

    </p><table id="d0e90244"><tr>
        <th> Header </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderStatus</code>
        </td>
        <td> Mandatory. Status code from the geocoder library. If status is <code class="literal">GeocoderStatus.OK</code> then additional headers is enriched </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderAddress</code>
        </td>
        <td> The formatted address </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderLat</code>
        </td>
        <td> The latitude of the location. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderLng</code>
        </td>
        <td> The longitude of the location. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderLatlng</code>
        </td>
        <td> The latitude and longitude of the location. Separated by comma. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderCity</code>
        </td>
        <td> The city long name. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderRegionCode</code>
        </td>
        <td> The region code. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderRegionName</code>
        </td>
        <td> The region name. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderCountryLong</code>
        </td>
        <td> The country long name. </td>
      </tr><tr>
        <td><code class="literal">CamelGeoCoderCountryShort</code>
        </td>
        <td> The country short name. </td>
      </tr></table><p>Notice not all headers may be provided depending on available data and mode in use (address vs latlng).</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Geocoder_HSH_Samples"></a>Samples</h2></div></div></div><p>In the example below we get the latitude and longitude for Paris, France</p><pre class="programlisting">  from("direct:start")
    .to("geocoder:address:Paris, France")</pre><p>If you provide a header with the <code class="literal">CamelGeoCoderAddress</code> then that
            overrides the endpoint configuration, so to get the location of Copenhagen, Denmark we
            can send a message with a headers as shown:</p><pre class="programlisting">template.sendBodyAndHeader("direct:start", "Hello", GeoCoderConstants.ADDRESS, "Copenhagen, Denmark");</pre><p>To get the address for a latitude and longitude we can do:</p><pre class="programlisting">  from("direct:start")
    .to("geocoder:latlng:40.714224,-73.961452")
    .log("Location ${header.CamelGeocoderAddress} is at lat/lng: ${header.CamelGeocoderLatlng} and in country ${header.CamelGeoCoderCountryShort}")</pre><p>Which will log</p><pre class="programlisting">Location 285 Bedford Avenue, Brooklyn, NY 11211, USA is at lat/lng: 40.71412890,-73.96140740 and in country US</pre><p>To get the current location you can use "current" as the address as shown:</p><pre class="programlisting">  from("direct:start")
    .to("geocoder:address:current")</pre></div></div></body></html>