<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Barcode DataFormat</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="azure-queue-component.html" title="Azure Storage Queue Service Component"><link rel="next" href="base64-dataformat.html" title="Base64 DataFormat"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="barcode-dataformat"></a>Barcode DataFormat</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="barcode-dataformat.html#_dependencies_16">Dependencies</a></span></dt><dt><span class="section"><a href="barcode-dataformat.html#_barcode_options">Barcode Options</a></span></dt><dt><span class="section"><a href="barcode-dataformat.html#_using_the_java_dsl">Using the Java DSL</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.14</strong></span></p><p>The barcode data format is based on the
<a class="link" href="https://github.com/zxing/zxing" target="_top">zxing library</a>. The goal of this
component is to create a barcode image from a String (marshal) and a
String from a barcode image (unmarshal). You&#8217;re free to use all features
that zxing offers.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_16"></a>Dependencies</h2></div></div></div><p>To use the barcode data format in your camel routes you need to add the
a dependency on <span class="strong"><strong>camel-barcode</strong></span> which implements this data format.</p><p>If you use maven you could just add the following to your pom.xml,
substituting the version number for the latest &amp; greatest release (see
the download page for the latest versions).</p><pre class="programlisting">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-barcode&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_barcode_options"></a>Barcode Options</h2></div></div></div><p>The Barcode dataformat supports 5 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>width</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>Width of the barcode</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>height</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>Height of the barcode</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>imageType</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Image type of the barcode such as png</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>barcodeFormat</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Barcode format such as QR-Code</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_the_java_dsl"></a>Using the Java DSL</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="barcode-dataformat.html#_marshalling">Marshalling</a></span></dt><dt><span class="section"><a href="barcode-dataformat.html#_unmarshalling">Unmarshalling</a></span></dt></dl></div><p>First you have to initialize the barcode data fomat class. You can use
the default constructor, or one of parameterized (see JavaDoc). The
default values are:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="90%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Parameter</th><th align="left" valign="top">Default Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p>image type (BarcodeImageType)</p></td><td align="left" valign="top"><p>PNG</p></td></tr><tr><td align="left" valign="top"><p>width</p></td><td align="left" valign="top"><p>100 px</p></td></tr><tr><td align="left" valign="top"><p>height</p></td><td align="left" valign="top"><p>100 px</p></td></tr><tr><td align="left" valign="top"><p>encoding</p></td><td align="left" valign="top"><p>UTF-8</p></td></tr><tr><td align="left" valign="top"><p>barcode format (BarcodeFormat)</p></td><td align="left" valign="top"><p>QR-Code</p></td></tr></tbody></table></div><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// QR-Code default</em>
DataFormat code = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> BarcodeDataFormat();</pre><p>If you want to use zxing hints, you can use the 'addToHintMap' method of
your BarcodeDataFormat instance:</p><pre class="programlisting">code.addToHintMap(DecodeHintType.TRY_HARDER, Boolean.true);</pre><p>For possible hints, please consult the xzing documentation.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_marshalling"></a>Marshalling</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct://code"</em></strong>)
  .marshal(code)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file://barcode_out"</em></strong>);</pre><p>You can call the route from a test class with:</p><pre class="programlisting">template.sendBody(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct://code"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"This is a testmessage!"</em></strong>);</pre><p>You should find inside the 'barcode_out' folder this image:</p><p><span class="inlinemediaobject"><img src="images/qr-code.png" alt="image"></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_unmarshalling"></a>Unmarshalling</h3></div></div></div><p>The unmarshaller is generic. For unmarshalling you can use any
BarcodeDataFormat instance. If you&#8217;ve two instances, one for
(generating) QR-Code and one for PDF417, it doesn&#8217;t matter which one
will be used.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file://barcode_in?noop=true"</em></strong>)
  .unmarshal(code) <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// for unmarshalling, the instance doesn't matter</em>
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:out"</em></strong>);</pre><p>If you&#8217;ll paste the QR-Code image above into the 'barcode_in' folder,
you should find &#8216;This is a testmessage!&#8217; inside the mock. You can find
the barcode data format as header variable:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>BarcodeFormat</p></td><td align="left" valign="top"><p>String</p></td><td align="left" valign="top"><p>Value of com.google.zxing.BarcodeFormat.</p></td></tr></tbody></table></div><p>&nbsp;</p><p>&nbsp;</p></div></div></div></body></html>