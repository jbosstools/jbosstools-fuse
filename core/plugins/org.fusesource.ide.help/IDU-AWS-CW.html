<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>AWS-CW</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-AWS.html" title="AWS"><link rel="prev" href="bk05ch10s01.html" title="Introduction to the AWS Components"><link rel="next" href="IDU-AWS-DDB.html" title="AWS-DDB"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-AWS-CW"></a>AWS-CW</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_CWComponent"></a>CW Component</h3></div></div></div><p>Available as of Camel 2.11</p><p>The CW component allows messages to be sent to an <a class="link" href="http://aws.amazon.com/cloudwatch/" target="_top">Amazon CloudWatch</a> metrics. The implementation of the Amazon API is provided by the&nbsp;<a class="link" href="http://aws.amazon.com/sdkforjava/" target="_top">AWS SDK</a>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Prerequisites"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Prerequisites</th></tr><tr><td align="left" valign="top"><p>You must have a valid Amazon Web Services developer account, and be signed up to use Amazon CloudWatch. More information are available at <a class="link" href="http://aws.amazon.com/cloudwatch/" target="_top">Amazon CloudWatch</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_URIFormat"></a>URI Format</h3></div></div></div><p></p><pre class="programlisting">aws-cw://namespace[?options]</pre><p>The metrics will be created if they don't already exists.
You can append query options to the URI in the following format, <code class="literal">?options=value&amp;option2=value&amp;...</code>
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_URIOptions"></a>URI Options</h3></div></div></div><p></p><table id="d0e49144"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Context </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="code">amazonCwClient</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Reference to a <code class="literal">com.amazonaws.services.cloudwatch.AmazonCloudWatch</code> in the Registry. </td>
      </tr><tr>
        <td><code class="code">accessKey</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Amazon AWS Access Key </td>
      </tr><tr>
        <td><code class="code">secretKey</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Amazon AWS Secret Key </td>
      </tr><tr>
        <td><code class="code">name</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The metric name which is used if the message header 'CamelAwsCwMetricName' is not present. </td>
      </tr><tr>
        <td><code class="code">value</code>
                </td>
        <td><code class="literal">1.0</code>
        </td>
        <td> Producer </td>
        <td> The metric value which is used if the message header 'CamelAwsCwMetricValue' is not present. </td>
      </tr><tr>
        <td><code class="code">unit</code>
                </td>
        <td><code class="literal">Count</code>
        </td>
        <td> Producer </td>
        <td> The metric unit which is used if the message header 'CamelAwsCwMetricUnit' is not present. </td>
      </tr><tr>
        <td><code class="code">namespace</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The metric namespace which is used if the message header 'CamelAwsCwMetricNamespace' is not present. </td>
      </tr><tr>
        <td><code class="code">timestamp</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The metric timestamp which is used if the message header 'CamelAwsCwMetricTimestamp' is not present. </td>
      </tr><tr>
        <td><code class="code">amazonCwEndpoint</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The region with which the AWS-CW client wants to work with. </td>
      </tr><tr>
                <td><code class="code">proxyHost</code></td>
                <td><code class="literal">null</code>
                </td>
                <td> Producer </td>
                <td>Specify a proxy host to be used inside the client definition.</td>
            </tr><tr>
                <td><code class="code">proxyPort</code></td>
                <td><code class="literal">null</code>
                </td>
                <td> Producer </td>
                <td>Specify a proxy port to be used inside the client definition.</td>
            </tr></table><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Required CW component options"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Required CW component options</th></tr><tr><td align="left" valign="top"><p>You have to provide the amazonCwClient in the Registry or your accessKey and secretKey to access the <a class="link" href="http://aws.amazon.com/cloudwatch/" target="_top">Amazon's CloudWatch</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_Usage"></a>Usage</h3></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_MessageheadersevaluatedbytheCWproducer"></a>Message headers evaluated by the CW producer</h3></div></div></div><p></p><p>

    </p><table id="d0e49380"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The Amazon CW metric name. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricValue</code>
        </td>
        <td><code class="literal">Double</code>
        </td>
        <td> The Amazon CW metric value. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricUnit</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The Amazon CW metric unit. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricNamespace</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The Amazon CW metric namespace. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricTimestamp</code>
        </td>
        <td><code class="literal">Date</code>
        </td>
        <td> The Amazon CW metric timestamp. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricDimensionName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td><span class="bold"><strong>Camel 2.12:</strong></span> The Amazon CW metric dimension name. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricDimensionValue</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td><span class="bold"><strong>Camel 2.12:</strong></span> The Amazon CW metric dimension value. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsCwMetricDimensions</code>
        </td>
        <td><code class="literal">Map&lt;String, String&gt;</code>
        </td>
        <td><span class="bold"><strong>Camel 2.12:</strong></span> A map of dimension names and dimension values. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_AdvancedAmazonCloudWatchconfiguration"></a>Advanced AmazonCloudWatch configuration</h3></div></div></div><p></p><p>If you need more control over the <code class="literal">AmazonCloudWatch</code> instance configuration you can create your own instance and refer to it from the URI:</p><pre class="programlisting">from("direct:start")
.to("aws-cw://namepsace?amazonCwClient=#client");</pre><p>The <code class="literal">#client</code> refers to a <code class="literal">AmazonCloudWatch</code> in the Registry.</p><p>For example if your Camel Application is running behind a firewall:</p><pre class="programlisting">AWSCredentials awsCredentials = new BasicAWSCredentials("myAccessKey", "mySecretKey");
ClientConfiguration clientConfiguration = new ClientConfiguration();
clientConfiguration.setProxyHost("http://myProxyHost");
clientConfiguration.setProxyPort(8080);

AmazonCloudWatch client = new AmazonCloudWatchClient(awsCredentials, clientConfiguration);

registry.bind("client", client);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-CW_HSH_Dependencies"></a>Dependencies</h3></div></div></div><p>Maven users will need to add the following dependency to their pom.xml.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: pom.xml"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">pom.xml</th></tr><tr><td align="left" valign="top"><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-aws&lt;/artifactId&gt;
    &lt;version&gt;${camel-version}&lt;/version&gt;
&lt;/dependency&gt;</pre></td></tr></table></div><p>where <code class="literal">${camel-version}</code> must be replaced by the actual version of Camel (2.10 or higher).</p><p>

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p></p><p>
          <a href="IDU-AWS.html" class="olink">AWS Component</a>
        </p></li></ul></div></div></div></body></html>