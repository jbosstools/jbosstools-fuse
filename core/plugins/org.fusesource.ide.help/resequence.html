<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Resequence</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="RiderRouteRef.html" title="Routing"><link rel="prev" href="RiderRouteRef.html" title="Routing"><link rel="next" href="RiderControlFlowRef.html" title="Control Flow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="resequence"></a>Resequence</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="resequence.html#_usage_15">Usage</a></span></dt><dt><span class="section"><a href="resequence.html#_properties_13">Properties</a></span></dt><dt><span class="section"><a href="resequence.html#_related_topics_28">Related topics</a></span></dt></dl></div><p>Resequences messages based on an expression</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_usage_15"></a>Usage</h3></div></div></div><p>The Resequence pattern reorders messages according to a specified expression. It can be
used in one of two modes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">batch&#8201;&#8212;&#8201;the resequencer collects the messages into a batch, resequences them and
sends the batch to the target endpoint</li><li class="listitem">stream&#8201;&#8212;&#8201;the resequencer looks for gaps in the message stream and resequences the
messages between the gaps before sending them to the target endpoint</li></ul></div><p>The Resequence pattern can be placed anywhere in the body of a route. It supports only a
single output.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_properties_13"></a>Properties</h3></div></div></div><p><a class="xref" href="resequence.html#RiderResequenceRefTbl1" title="Table&nbsp;51.&nbsp;Resequence Properties">Table&nbsp;51, &#8220;Resequence Properties&#8221;</a> describes the properties you can specify
using the properties editor.</p><div class="table"><a name="RiderResequenceRefTbl1"></a><p class="title"><b>Table&nbsp;51.&nbsp;Resequence Properties</b></p><div class="table-contents"><table summary="Resequence Properties" border="1"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">Language</code></p></td><td align="left" valign="top"><p>Specifies the expression language used to process the expression.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Description</code></p></td><td align="left" valign="top"><p>Specifies a text description for the node. This description is included in the
              generated XML file, but it is informational only. It is not used by Apache Camel.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Id</code></p></td><td align="left" valign="top"><p>Specifies a unique identifier for the endpoint.</p>
<p>The tooling automatically generates an id for a node when it is
created, but you can remove that id or replace it with your own.
The Camel debugger requires all nodes with a breakpoint set to have
a unique id.</p>
<p>You can use the id to refer to endpoints in your Camel XML
file.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Resequencer Config</code></p></td><td align="left" valign="top"><p>Specifies the configuration for the resequencer:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">batch-config</code>&#8201;&#8212;&#8201;configures batch processing mode, in
which messages are collected into batches, sorted, and then
output accordingly.</li><li class="listitem"><code class="literal">stream-config</code>&#8201;&#8212;&#8201;configures stream processing mode,
in which messages are contunuously reorderd and output
based on gaps detected between them.</li></ul></div>
<p>Configure only one mode.</p></td></tr></tbody></table></div></div><br class="table-break"><p>batch-config configuration
<a class="xref" href="resequence.html#batchCfgRefTbl1" title="Table&nbsp;52.&nbsp;batch-config Properties">Table&nbsp;52, &#8220;batch-config Properties&#8221;</a> describes the properties you can specify
using the properties editor.</p><div class="table"><a name="batchCfgRefTbl1"></a><p class="title"><b>Table&nbsp;52.&nbsp;batch-config Properties</b></p><div class="table-contents"><table summary="batch-config Properties" border="1"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">Allow Duplicates</code></p></td><td align="left" valign="top"><p>Specifies whether the resequencer keeps duplicate messages (those having the same
                message expression). The default is
              <span class="emphasis"><em>Disabled</em></span>, which forces the resequencer to keep only the
                last duplicate message.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Batch Size</code></p></td><td align="left" valign="top"><p>Specifies the number of messages to include in the batch. The default is
                    <span class="emphasis"><em>100</em></span>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Batch Timeout</code></p></td><td align="left" valign="top"><p>Specifies the amount of time, in milliseconds, the node will attempt to batch up
              the messages before timing out. The default is <span class="emphasis"><em>1000</em></span>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Ignore Invalid Exchanges</code></p></td><td align="left" valign="top"><p>Specifies whether the resequencer ignores invalid exchanges, those for which it
              cannot evaluate the specified expression. The default is
                <span class="emphasis"><em>Disabled</em></span>, which results in the resequencer throwing a
              <code class="literal">CamelExchangeException</code> when it encounters an invalid exchange.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Reverse</code></p></td><td align="left" valign="top"><p>Specifies whether to reverse the priority of output based on expression
                            ordering. By default, expression ordering is 0 &#8594; 9/A &#8594; Z, with highest
                            priority given to lowest order expressions. The default is
                                <span class="emphasis"><em>Disabled</em></span>. For details, see <a class="link" href="http://camel.apache.org/resequencer.html" target="_top">Resequencer</a>.</p></td></tr></tbody></table></div></div><br class="table-break"><p>stream-config configuration
<a class="xref" href="resequence.html#streamCfgRefTbl1" title="Table&nbsp;53.&nbsp;stream-config Properties">Table&nbsp;53, &#8220;stream-config Properties&#8221;</a> describes the properties you can specify
using the properties editor.</p><div class="table"><a name="streamCfgRefTbl1"></a><p class="title"><b>Table&nbsp;53.&nbsp;stream-config Properties</b></p><div class="table-contents"><table summary="stream-config Properties" border="1"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">Capacity</code></p></td><td align="left" valign="top"><p>Specifies the maximum number of messages that can be stored in the node&#8217;s memory while it
waits to receive out-of-sequence messages.</p>
<p>This property is used to prevent the node from running out of memory when it
detects gaps in the message stream. In general, when using a large timeout value,
set the capacity value sufficiently high to accommodate it (for example,
<code class="literal">&lt;stream-config capacity="5000" timeout="4000" /&gt;</code>).</p>
<p>The default is <span class="emphasis"><em>1000</em></span>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Comparator Ref</code></p></td><td align="left" valign="top"><p>Specifies a reference to the bean that implements the ording alorithm for the
                            custom sequence number format. For details, see <a class="link" href="http://camel.apache.org/resequencer.html" target="_top">Resequencer</a>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Ignore Invalid Exchanges</code></p></td><td align="left" valign="top"><p>Specifies whether the resequencer ignores invalid exchanges, those for which it
                    cannot evaluate the specified expression. The default is
                    <span class="emphasis"><em>Disabled</em></span>, which results in the resequencer throwing a
                    <code class="literal">CamelExchangeException</code> when it encounters an invalid exchange.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Timeout</code></p></td><td align="left" valign="top"><p>Specifies the amount of time, in milliseconds, the node will wait to receive an
out-of-sequence message before timing out.</p>
<p>If you know the max time difference between successive messages in the stream,
set the timeout to that value. Doing so guarantees that all messages in the stream
will be delivered in the correct order to the next node in the route. The lower the
timeout value compared to the out-of-sequence time difference, the greater the
probability of out-of-sequence message delivery.</p>
<p>The default is <span class="emphasis"><em>1000</em></span>.</p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_related_topics_28"></a>Related topics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderExLang.html" title="Part&nbsp;III.&nbsp;Expression and Predicates Languages">Part&nbsp;III, &#8220;Expression and Predicates Languages&#8221;</a></li><li class="listitem"><a class="xref" href="RiderEditRoute.html#RiderEditPrefs" title="Configuring the route editor">Configuring the route editor</a></li></ul></div></div></div></body></html>