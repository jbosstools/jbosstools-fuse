<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>CXF Bean Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-CXF.html" title="CXF"><link rel="next" href="IDU-CXFRS.html" title="CXFRS"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-CXFBeanComponent"></a>CXF Bean Component</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-CXFBeanComponent_HSH_CXFBeanComponent20orlater"></a>CXF Bean Component (2.0 or later)</h2></div></div></div><p></p><p>The <span class="bold"><strong>cxfbean:</strong></span> component allows other Camel endpoints to
            send exchange and invoke Web service bean objects. <span class="bold"><strong>Currently, it
                only supports JAXRS and JAXWS (new to Camel 2.1) annotated service
            beans.</strong></span></p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p><code class="literal">CxfBeanEndpoint</code> is a <code class="literal">ProcessorEndpoint</code> so it has
        no consumers. It works similarly to a Bean component.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-CXFBeanComponent_HSH_URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">cxfbean:serviceBeanRef</pre><p>Where <span class="bold"><strong>serviceBeanRef</strong></span> is a registry key to look up the service bean object. If <code class="literal">serviceBeanRef</code> references a <code class="literal">List</code> object, elements of the <code class="literal">List</code> are the service bean objects accepted by the endpoint.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-CXFBeanComponent_HSH_Options"></a>Options</h2></div></div></div><table id="d0e68604"><tr>
        <th> Name </th>
        <th> Description </th>
        <th> Example </th>
        <th> Required? </th>
        <th> Default Value </th>
      </tr><tr>
        <td><code class="literal">bus</code>
        </td>
        <td> CXF bus reference specified by the <code class="literal">#</code> notation. The referenced object
                    must be an instance of <code class="literal">org.apache.cxf.Bus</code>. </td>
        <td><code class="literal">bus=#busName</code>
        </td>
        <td> No </td>
        <td> Default bus created by CXF Bus Factory </td>
      </tr><tr>
        <td><code class="literal">cxfBeanBinding</code>
        </td>
        <td> CXF bean binding specified by the <code class="literal">#</code> notation. The referenced object
                    must be an instance of
                        <code class="literal">org.apache.camel.component.cxf.cxfbean.CxfBeanBinding</code>. </td>
        <td><code class="literal">cxfBinding=#bindingName</code>
        </td>
        <td> No </td>
        <td><code class="literal">DefaultCxfBeanBinding</code>
        </td>
      </tr><tr>
        <td><code class="literal">headerFilterStrategy</code>
        </td>
        <td> Header filter strategy specified by the <code class="literal">#</code> notation. The referenced
                    object must be an instance of
                        <code class="literal">org.apache.camel.spi.HeaderFilterStrategy</code>. </td>
        <td><code class="literal">headerFilterStrategy=#strategyName</code>
        </td>
        <td> No </td>
        <td><code class="literal">CxfHeaderFilterStrategy</code>
        </td>
      </tr><tr>
        <td><code class="literal">populateFromClass</code>
        </td>
        <td> Since 2.3, the wsdlLocation annotated in the POJO is ignored (by default) unless this option is set to&nbsp;<code class="literal">false.</code> Prior to 2.3, the wsdlLocation annotated in the POJO is always honored and it is not possible to ignore.</td>
        <td><code class="literal">true</code>, <code class="literal">false</code>
        </td>
        <td> No </td>
        <td><code class="literal">true</code>
        </td>
      </tr><tr>
        <td><code class="literal">providers</code>
        </td>
        <td> Since 2.5, setting the providers for the CXFRS endpoint. </td>
        <td><code class="literal">providers=#providerRef1,#providerRef2</code>
        </td>
        <td> No </td>
        <td><code class="literal">null</code>
        </td>
      </tr><tr>
        <td><code class="literal">setDefaultBus</code>
        </td>
        <td> Will set the default bus when CXF endpoint create a bus by itself. </td>
        <td><code class="literal">true</code>, <code class="literal">false</code>
        </td>
        <td> No </td>
        <td><code class="literal">false</code>
        </td>
      </tr></table><p>

    </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-CXFBeanComponent_HSH_Headers"></a>Headers</h2></div></div></div><table id="d0e68793"><tr>
        <th> Name </th>
        <th> Description </th>
        <th> Type </th>
        <th> Required? </th>
        <th> Default Value </th>
        <th> In/Out </th>
        <th> Examples </th>
      </tr><tr>
        <td><code class="literal">CamelHttpCharacterEncoding</code> (before 2.0-m2: <code class="literal">CamelCxfBeanCharacterEncoding</code>) </td>
        <td> Character encoding </td>
        <td><code class="literal">String</code>
        </td>
        <td> No </td>
        <td> None </td>
        <td> In </td>
        <td> ISO-8859-1 </td>
      </tr><tr>
        <td><code class="literal">CamelContentType</code> (before 2.0-m2: <code class="literal">CamelCxfBeanContentType</code>) </td>
        <td> Content type </td>
        <td><code class="literal">String</code>
        </td>
        <td> No </td>
        <td> \**/*\* </td>
        <td> In </td>
        <td><code class="literal">text/xml</code>
        </td>
      </tr><tr>
        <td>
          <p> CamelHttpBaseUri 
(2.0-m3 and before: <code class="literal">CamelCxfBeanRequestBasePath</code>) </p>
        </td>
        <td> The value of this header will be set in the CXF message as the <code class="literal">Message.BASE_PATH</code> property.  It is needed by CXF JAX-RS processing.  Basically, it is the scheme, host and port portion of the request URI. </td>
        <td><code class="literal">String</code>
        </td>
        <td> Yes </td>
        <td> The Endpoint URI of the source endpoint in the Camel exchange </td>
        <td> In </td>
        <td>
          <a class="link" href="http://localhost:9000" target="_top">
            http://localhost:9000
          </a>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHttpPath</code> (before 2.0-m2: <code class="literal">CamelCxfBeanRequestPat{}</code>h) </td>
        <td> Request URI's path </td>
        <td><code class="literal">String</code>
        </td>
        <td> Yes </td>
        <td> None </td>
        <td> In </td>
        <td><code class="literal">consumer/123</code>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHttpMethod</code> (before 2.0-m2: <code class="literal">CamelCxfBeanVerb</code>) </td>
        <td> RESTful request verb </td>
        <td><code class="literal">String</code>
        </td>
        <td> Yes </td>
        <td> None </td>
        <td> In </td>
        <td><code class="literal">GET</code>, <code class="literal">PUT</code>, <code class="literal">POST</code>, <code class="literal">DELETE</code>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHttpResponseCode</code>
        </td>
        <td> HTTP response code </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> No </td>
        <td> None </td>
        <td> Out </td>
        <td> 200 </td>
      </tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Currently, CXF Bean component has (only) been tested with Jetty HTTP component it can
        understand headers from Jetty HTTP component without requiring conversion.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-CXFBeanComponent_HSH_AWorkingSample"></a>A Working Sample</h2></div></div></div><p>This sample shows how to create a route that starts a Jetty HTTP server.  The route sends requests to a CXF Bean and invokes a JAXRS annotated service.</p><p>First, create a route as follows. The <code class="literal">from</code> endpoint is a Jetty HTTP
      endpoint that is listening on port 9000. Notice that the <code class="literal">matchOnUriPrefix</code>
      option must be set to <code class="literal">true</code> because RESTful request URI will not match the
      endpoint's URI http://localhost:9000 exactly.</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="jetty:http://localhost:9000?matchOnUriPrefix=true" /&gt;
	&lt;to uri="cxfbean:customerServiceBean" /&gt;
	&lt;to uri="mock:endpointA" /&gt;
&lt;/route&gt;</pre><p>The <code class="literal">to</code> endpoint is a CXF Bean with bean name <code class="literal">customerServiceBean</code>. The name will be looked up from the registry.  Next, we make sure our service bean is available in Spring registry.  We create a bean definition in the Spring configuration.  In this example, we create a List of service beans (of one element).  We could have created just a single bean without a List.</p><pre class="programlisting">&lt;util:list id="customerServiceBean"&gt;
	&lt;bean class="org.apache.camel.component.cxf.jaxrs.testbean.CustomerService" /&gt;
&lt;/util:list&gt;

&lt;bean class="org.apache.camel.wsdl_first.PersonImpl" id="jaxwsBean" /&gt;</pre><p>That's it.  Once the route is started, the web service is ready for business.  A HTTP client can make a request and receive response.</p><pre class="programlisting">url = new URL("http://localhost:9000/customerservice/orders/223/products/323");
in = url.openStream();
assertEquals("{\"Product\":{\"description\":\"product 323\",\"id\":323}}", CxfUtils.getStringFromInputStream(in));</pre></div></div></body></html>