<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Using OSGi blueprint with Camel</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="bindy-dataformat.html" title="Bindy DataFormat"><link rel="next" href="bonita-component.html" title="Bonita Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="_using_osgi_blueprint_with_camel"></a>Using OSGi blueprint with Camel</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="_using_osgi_blueprint_with_camel.html#_overview_50">Overview</a></span></dt><dt><span class="section"><a href="_using_osgi_blueprint_with_camel.html#_using_camel_blueprint">Using camel-blueprint</a></span></dt></dl></div><p>A custom XML namespace for Blueprint has been created to let you leverage the nice XML dialect.
Given Blueprint custom namespaces are not standardized yet, this namespace can only be used on the Apache Aries Blueprint
implementation, which is the one used by Apache Karaf.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_overview_50"></a>Overview</h2></div></div></div><p>The XML schema is mostly the same as the one for Spring, so all the xml snippets throughout the documentation
referring to Spring XML also apply to Blueprint routes.</p><p>Here is a very simple route definition using blueprint:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;blueprint</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"timer:test"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"log:test"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/blueprint&gt;</strong></pre><p>There are a few limitations at this point about the supported xml elements (compared to the Spring xml syntax):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">beanPostProcessor are specific to Spring and aren&#8217;t allowed</li></ul></div><p>However, using blueprint when you deploy your applications in an OSGi enviroment has several advantages:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">when upgrading to a new camel version, you don&#8217;t have to change the namespace, as the correct version will be
selected based on the camel packages that are imported by your bundle</li><li class="listitem">no startup ordering issue with respect to the custom namespaces and your bundles</li><li class="listitem">you can use Blueprint property placeholders</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_camel_blueprint"></a>Using camel-blueprint</h2></div></div></div><p>To leverage camel-blueprint in OSGi, you only need the Aries Blueprint bundle and the camel-blueprint bundle,
in addition to camel-core and its dependencies.</p><p>If you use Karaf, you can use the feature named camel-blueprint which will install all the required bundles.</p></div></div></body></html>