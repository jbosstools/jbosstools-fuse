<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>SpEL Language</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="spark-rest-component.html" title="Spark Rest Component"><link rel="next" href="splunk-component.html" title="Splunk Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="spel-language"></a>SpEL Language</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="spel-language.html#_variables_4">Variables</a></span></dt><dt><span class="section"><a href="spel-language.html#_options_137">Options</a></span></dt><dt><span class="section"><a href="spel-language.html#_samples_38">Samples</a></span></dt><dt><span class="section"><a href="spel-language.html#_loading_script_from_external_resource_5">Loading script from external resource</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.7</strong></span></p><p>Camel allows
<a class="link" href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions" target="_top">Spring Expression Language (SpEL)</a>
to be used as an Expression or Predicate in the DSL or XML Configuration.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>It is recommended to use SpEL in Spring runtimes. However from Camel 2.21 onwards you can
use SpEL in other runtimes (there may be functionality SpEL cannot do when not running in a Spring runtime)</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_variables_4"></a>Variables</h2></div></div></div><p>The following variables are available in expressions and predicates written in SpEL:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Variable</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>this</p></td><td align="left" valign="top"><p>Exchange</p></td><td align="left" valign="top"><p>the Exchange is the root object</p></td></tr><tr><td align="left" valign="top"><p>exchange</p></td><td align="left" valign="top"><p>Exchange</p></td><td align="left" valign="top"><p>the Exchange object</p></td></tr><tr><td align="left" valign="top"><p>exception</p></td><td align="left" valign="top"><p>Throwable</p></td><td align="left" valign="top"><p>the Exchange exception (if any)</p></td></tr><tr><td align="left" valign="top"><p>exchangeId</p></td><td align="left" valign="top"><p>String</p></td><td align="left" valign="top"><p>the exchange id</p></td></tr><tr><td align="left" valign="top"><p>fault</p></td><td align="left" valign="top"><p>Message</p></td><td align="left" valign="top"><p>the Fault message (if any)</p></td></tr><tr><td align="left" valign="top"><p>body</p></td><td align="left" valign="top"><p>Object</p></td><td align="left" valign="top"><p>The IN message body.</p></td></tr><tr><td align="left" valign="top"><p>request</p></td><td align="left" valign="top"><p>Message</p></td><td align="left" valign="top"><p>the exchange.in message</p></td></tr><tr><td align="left" valign="top"><p>response</p></td><td align="left" valign="top"><p>Message</p></td><td align="left" valign="top"><p>the exchange.out message (if any)</p></td></tr><tr><td align="left" valign="top"><p>properties</p></td><td align="left" valign="top"><p>Map</p></td><td align="left" valign="top"><p>the exchange properties</p></td></tr><tr><td align="left" valign="top"><p>property(name)</p></td><td align="left" valign="top"><p>Object</p></td><td align="left" valign="top"><p>the property by the given name</p></td></tr><tr><td align="left" valign="top"><p>property(name, type)</p></td><td align="left" valign="top"><p>Type</p></td><td align="left" valign="top"><p>the property by the given name as the given type</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_137"></a>Options</h2></div></div></div><p>The SpEL language supports 1 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>trim</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to trim the value to remove leading and trailing whitespaces and line breaks</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_samples_38"></a>Samples</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="spel-language.html#_expression_templating">Expression templating</a></span></dt><dt><span class="section"><a href="spel-language.html#_bean_integration">Bean integration</a></span></dt><dt><span class="section"><a href="spel-language.html#_spel_in_enterprise_integration_patterns">SpEL in enterprise integration patterns</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_expression_templating"></a>Expression templating</h3></div></div></div><p>SpEL expressions need to be surrounded by <code class="literal">#{</code> <code class="literal">}</code> delimiters since
expression templating is enabled. This allows you to combine SpEL
expressions with regular text and use this as extremely lightweight
template language.</p><p>For example if you construct the following route:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:example"</em></strong>)
    .setBody(spel(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello #{request.body}! What a beautiful #{request.headers['dayOrNight']}"</em></strong>))
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>In the route above, notice spel is a static method which we need to
import from <code class="literal">org.apache.camel.language.spel.SpelExpression.spel</code>, as we
use spel as an Expression passed in as a parameter
to the <code class="literal">setBody</code> method. Though if we use the fluent API we can do this
instead:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:example"</em></strong>)
    .setBody().spel(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello #{request.body}! What a beautiful #{request.headers['dayOrNight']}"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>Notice we now use the <code class="literal">spel</code> method from the <code class="literal">setBody()</code> method. And
this does not require us to static import the spel method from
<code class="literal">org.apache.camel.language.spel.SpelExpression.spel</code>.</p><p>And sent a message with the string "World" in the body, and a header
"dayOrNight" with value "day":</p><pre class="programlisting">template.sendBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:example"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"World"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dayOrNight"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"day"</em></strong>);</pre><p>The output on <code class="literal">mock:result</code> will be <span class="emphasis"><em>"Hello World! What a beautiful
day"</em></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_bean_integration"></a>Bean integration</h3></div></div></div><p>You can reference beans defined in the Registry
(most likely an <code class="literal">ApplicationContext</code>) in your SpEL expressions. For
example if you have a bean named "foo" in your <code class="literal">ApplicationContext</code> you
can invoke the "bar" method on this bean like this:</p><pre class="programlisting">#{@foo.bar == 'xyz'}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_spel_in_enterprise_integration_patterns"></a>SpEL in enterprise integration patterns</h3></div></div></div><p>You can use SpEL as an expression for <a class="link" href="recipient-list.html" target="_top">Recipient
List</a> or as a predicate inside a <a class="link" href="message-filter.html" target="_top">Message
Filter</a>:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:foo"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;filter&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;spel&gt;</strong>#{request.headers['foo'] == 'bar'}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/spel&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:bar"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/filter&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>And the equivalent in Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:foo"</em></strong>)
    .filter().spel(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"#{request.headers['foo'] == 'bar'}"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:bar"</em></strong>);</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_loading_script_from_external_resource_5"></a>Loading script from external resource</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.11</strong></span></p><p>You can externalize the script and have Camel load it from a resource
such as <code class="literal">"classpath:"</code>, <code class="literal">"file:"</code>, or <code class="literal">"http:"</code>.
 This is done using the following syntax: <code class="literal">"resource:scheme:location"</code>,
eg to refer to a file on the classpath you can do:</p><pre class="programlisting">.setHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myHeader"</em></strong>).spel(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"resource:classpath:myspel.txt"</em></strong>)</pre></div></div></body></html>