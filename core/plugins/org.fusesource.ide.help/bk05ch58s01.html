<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Introduction to the GAE Components</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-GAE.html" title="GAE"><link rel="prev" href="IDU-GAE.html" title="GAE"><link rel="next" href="IDU-gauth.html" title="gauth"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e87524"></a>Introduction to the GAE Components</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-GAE_HSH_CamelComponentsforGoogleAppEngine"></a>Apache Camel Components for Google App Engine</h3></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>The GAE components are deprecated and will be removed from a future release of
                    JBoss Fuse.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip: Tutorials"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="imagesdb/tip.png"></td><th align="left">Tutorials</th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A good starting point for using Apache Camel on GAE is the <a class="link" href="http://camel.apache.org/tutorial-for-camel-on-google-app-engine.html" target="_top">Tutorial for Camel on Google App
                Engine</a>
            </p></li><li class="listitem"><p>The <a class="link" href="http://camel.apache.org/tutorial-oauth.html" target="_top">OAuth tutorial</a> demonstrates how to
              implement <a class="link" href="http://oauth.net/" target="_top">OAuth</a> in web applications. </p></li></ul></div></td></tr></table></div><p>The Apache Camel components for <a class="link" href="http://code.google.com/appengine/" target="_top">Google App
          Engine</a> (GAE) are part of the <code class="literal">camel-gae</code> project and provide
        connectivity to GAE's <a class="link" href="http://code.google.com/appengine/docs/java/apis.html" target="_top">cloud computing services</a>. They make the GAE cloud computing environment accessible
        to applications via Apache Camel interfaces. Following this pattern for other cloud computing
        environments could make it easier to port Apache Camel applications from one cloud computing
        provider to another. The following table lists the cloud computing services provided by
        Google App Engine and the supporting Apache Camel components. The documentation of each
        component can be found by following the link in the <span class="emphasis"><em>Camel Component</em></span>
        column.</p><table id="d0e87567"><tr>
          <th>GAE service</th>
          <th>Camel component</th>
          <th>Component description</th>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/urlfetch/" target="_top">URL fetch
              service</a>
          </td>
          <td>
            <a href="IDU-ghttp.html" class="olink">ghttp</a>
          </td>
          <td>Provides connectivity to the GAE URL fetch service but can also be used to receive
            messages from servlets.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/taskqueue/" target="_top">Task queueing
              service</a>
          </td>
          <td>
            <a href="IDU-gtask.html" class="olink">gtask</a>
          </td>
          <td>Supports asynchronous message processing on GAE by using the task queueing service as
            message queue.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/mail/" target="_top">Mail service</a>
          </td>
          <td>
            <a href="IDU-gmail.html" class="olink">gmail</a>
          </td>
          <td>Supports sending of emails via the GAE mail service. Receiving mails is not supported
            yet but will be added later.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/memcache/" target="_top">Memcache
              service</a>
          </td>
          <td></td>
          <td>Not supported yet.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/xmpp/" target="_top">XMPP service</a>
          </td>
          <td></td>
          <td>Not supported yet.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/images/" target="_top">Images service</a>
          </td>
          <td></td>
          <td>Not supported yet.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/appengine/docs/java/datastore/" target="_top">Datastore
              service</a>
          </td>
          <td></td>
          <td>Not supported yet.</td>
        </tr><tr>
          <td>
            <a class="link" href="http://code.google.com/apis/accounts/" target="_top">Accounts service</a>
          </td>
          <td>
            <a href="IDU-gauth.html" class="olink">gauth</a>
            <a href="IDU-glogin.html" class="olink">glogin</a>
          </td>
          <td>These components interact with the Google Accounts API for authentication and
            authorization. Google Accounts is not specific to Google App Engine but is often used by
            GAE applications for implementing security. The <a href="IDU-gauth.html" class="olink">gauth</a> component is used by web applications to implement a <a class="link" href="http://code.google.com/apis/accounts/docs/OAuth.html" target="_top">Google-specific
              OAuth</a> consumer. This component can also be used to OAuth-enable non-GAE web
            applications. The <a href="IDU-glogin.html" class="olink">glogin</a> component is used by
            Java clients (outside GAE) for programmatic login to GAE applications. For instructions
            how to protect GAE applications against unauthorized access refer to the <a href="IDU-gsec.html" class="olink">Security for Apache Camel GAE applications</a> page.</td>
        </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-GAE_HSH_Camelcontext"></a>Camel context</h3></div></div></div><p>Setting up a <code class="literal">SpringCamelContext</code> on Google App Engine differs between
        Camel 2.1 and higher versions. The problem is that usage of the Camel-specific Spring
        configuration XML schema from the <code class="literal"><a class="link" href="http://camel.apache.org/schema/spring" target="_top">http://camel.apache.org/schema/spring</a></code> namespace requires JAXB and
        Camel 2.1 depends on a Google App Engine SDK version that doesn't support JAXB yet. This
        limitation has been removed since Camel 2.2. </p><p>JMX must be disabled in any case because the <code class="literal">javax.management</code> package
        isn't on the App Engine JRE whitelist.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-GAE_HSH_Camel21"></a>Apache Camel 2.1</h3></div></div></div><p><code class="literal">camel-gae</code> 2.1 comes with the following
          <code class="literal">CamelContext</code> implementations.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">org.apache.camel.component.gae.context.GaeDefaultCamelContext</code>
            (extends <code class="literal">org.apache.camel.impl.DefaultCamelContext</code>)</p></li><li class="listitem"><p><code class="literal">org.apache.camel.component.gae.context.GaeSpringCamelContext</code>
            (extends <code class="literal">org.apache.camel.spring.SpringCamelContext</code>)</p></li></ul></div><p>Both disable JMX before startup. The <code class="literal">GaeSpringCamelContext</code>
        additionally provides setter methods adding route builders as shown in the next
        example.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: appctx.xml"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">appctx.xml</th></tr><tr><td align="left" valign="top"><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;
    
    &lt;bean id="camelContext" 
        class="org.apache.camel.component.gae.context.GaeSpringCamelContext"&gt;
        &lt;property name="routeBuilder" ref="myRouteBuilder" /&gt;
    &lt;/bean&gt;
    
    &lt;bean id="myRouteBuilder"
        class="org.example.MyRouteBuilder"&gt;
    &lt;/bean&gt;
    
&lt;/beans&gt;</pre></td></tr></table></div><p>Alternatively, use the <code class="literal">routeBuilders</code> property of the
          <code class="literal">GaeSpringCamelContext</code> for setting a list of route builders. Using this
        approach, a <code class="literal">SpringCamelContext</code> can be configured on GAE without the need
        for JAXB.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-GAE_HSH_Camel22"></a>Apache Camel 2.2</h3></div></div></div><p>With Camel 2.2 or higher, applications can use the <code class="literal">
          <a class="link" href="http://camel.apache.org/schema/spring" target="_top">http://camel.apache.org/schema/spring</a></code> namespace for configuring a
          <code class="literal">SpringCamelContext</code> but still need to disable JMX. Here's an
        example.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: appctx.xml"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">appctx.xml</th></tr><tr><td align="left" valign="top"><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://camel.apache.org/schema/spring
http://camel.apache.org/schema/spring/camel-spring.xsd"&gt;
    
    &lt;camel:camelContext id="camelContext"&gt;
        &lt;camel:jmxAgent id="agent" disabled="true" /&gt;
        &lt;camel:routeBuilder ref="myRouteBuilder"/&gt;
    &lt;/camel:camelContext&gt;
    
    &lt;bean id="myRouteBuilder"
        class="org.example.MyRouteBuilder"&gt;
    &lt;/bean&gt;
    
&lt;/beans&gt;</pre></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-GAE_HSH_Thewebxml"></a>The web.xml</h3></div></div></div><p>Running Apache Camel on GAE requires usage of the
          <code class="literal">CamelHttpTransportServlet</code> from <code class="literal">camel-servlet</code>. The
        following example shows how to configure this servlet together with a Spring application
        context XML file. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: web.xml"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">web.xml</th></tr><tr><td align="left" valign="top"><pre class="programlisting">&lt;web-app 
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="
http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"&gt;
    
    &lt;servlet&gt;
        &lt;servlet-name&gt;CamelServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.camel.component.servlet.CamelHttpTransportServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;appctx.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;

    &lt;!--
        Mapping used for external requests
     --&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;CamelServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/camel/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    
    &lt;!--
        Mapping used for web hooks accessed by task queueing service.
     --&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;CamelServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/worker/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;</pre></td></tr></table></div><p>The location of the Spring application context XML file is given by the
          <code class="literal">contextConfigLocation</code> init parameter. The <code class="literal">appctx.xml</code>
        file must be on the classpath. The servlet mapping makes the Apache Camel application accessible
        under <code class="literal">http://&lt;appname&gt;.appspot.com/camel/...</code> when deployed to Google
        App Engine where <code class="literal">&lt;appname&gt;</code> must be replaced by a real GAE application
        name. The second servlet mapping is used internally by the task queueing service for
        background processing via <a class="link" href="http://www.webhooks.org/" target="_top">web hooks</a>. This
        mapping is relevant for the <a href="IDU-gtask.html" class="olink">gtask</a> component and is
        explained there in more detail. </p></div></div></body></html>