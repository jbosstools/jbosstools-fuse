<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Properties Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="pgp-dataformat.html" title="PGP DataFormat"><link rel="next" href="protobuf-dataformat.html" title="Protobuf DataFormat"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="properties-component"></a>Properties Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="properties-component.html#_uri_format_152">URI format</a></span></dt><dt><span class="section"><a href="properties-component.html#_options_115">Options</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_propertyplaceholder">Using PropertyPlaceholder</a></span></dt><dt><span class="section"><a href="properties-component.html#_syntax_3">Syntax</a></span></dt><dt><span class="section"><a href="properties-component.html#_propertyresolver">PropertyResolver</a></span></dt><dt><span class="section"><a href="properties-component.html#_defining_location">Defining location</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_system_and_environment_variables_in_locations">Using system and environment variables in locations</a></span></dt><dt><span class="section"><a href="properties-component.html#_configuring_in_java_dsl">Configuring in Java DSL</a></span></dt><dt><span class="section"><a href="properties-component.html#_configuring_in_spring_xml">Configuring in Spring XML</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_a_properties_from_the_registry">Using a Properties from the Registry</a></span></dt><dt><span class="section"><a href="properties-component.html#_examples_using_properties_component">Examples using properties component</a></span></dt><dt><span class="section"><a href="properties-component.html#_examples_24">Examples</a></span></dt><dt><span class="section"><a href="properties-component.html#_example_with_link_linkend_simple_language_simple_link_language">Example with Simple language</a></span></dt><dt><span class="section"><a href="properties-component.html#_additional_property_placeholder_supported_in_spring_xml">Additional property placeholder supported in Spring XML</a></span></dt><dt><span class="section"><a href="properties-component.html#_overriding_a_property_setting_using_a_jvm_system_property">Overriding a property setting using a JVM System Property</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_property_placeholders_for_any_kind_of_attribute_in_the_xml_dsl">Using property placeholders for any kind of attribute in the XML DSL</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_blueprint_property_placeholder_with_camel_routes">Using Blueprint property placeholder with Camel routes</a></span></dt><dt><span class="section"><a href="properties-component.html#_explicit_referring_to_a_osgi_blueprint_placeholder_in_camel">Explicit referring to a OSGi blueprint placeholder in Camel</a></span></dt><dt><span class="section"><a href="properties-component.html#_overriding_blueprint_property_placeholders_outside_camelcontext">Overriding Blueprint property placeholders outside CamelContext</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_cfg_or_properties_file_for_blueprint_property_placeholders">Using .cfg or .properties file for Blueprint property placeholders</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_cfg_file_and_overriding_properties_for_blueprint_property_placeholders">Using .cfg file and overriding properties for Blueprint property placeholders</a></span></dt><dt><span class="section"><a href="properties-component.html#_bridging_spring_and_camel_property_placeholders">Bridging Spring and Camel property placeholders</a></span></dt><dt><span class="section"><a href="properties-component.html#_clashing_spring_property_placeholders_with_camels_simple_language">Clashing Spring property placeholders with Camels Simple language</a></span></dt><dt><span class="section"><a href="properties-component.html#_overriding_properties_from_camel_test_kit">Overriding properties from Camel test kit</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_propertyinject">Using @PropertyInject</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_out_of_the_box_functions">Using out of the box functions</a></span></dt><dt><span class="section"><a href="properties-component.html#_using_custom_functions">Using custom functions</a></span></dt><dt><span class="section"><a href="properties-component.html#_see_also_101">See Also</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.3</strong></span></p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_152"></a>URI format</h2></div></div></div><pre class="screen">properties:key[?options]</pre><p>Where <span class="strong"><strong>key</strong></span> is the key for the property to lookup</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_115"></a>Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="properties-component.html#_path_parameters_1_parameters_144">Path Parameters (1 parameters):</a></span></dt><dt><span class="section"><a href="properties-component.html#_query_parameters_6_parameters_10">Query Parameters (6 parameters):</a></span></dt></dl></div><p>The Properties component supports 17 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>locations</strong></span> (common)</p></td><td align="left" valign="top"><p>A list of locations to load properties. This option will override any default locations and only use the locations from this option.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>List</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>location</strong></span> (common)</p></td><td align="left" valign="top"><p>A list of locations to load properties. You can use comma to separate multiple locations. This option will override any default locations and only use the locations from this option.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>encoding</strong></span> (common)</p></td><td align="left" valign="top"><p>Encoding to use when loading properties file from the file system or classpath. If no encoding has been set, then the properties files is loaded using ISO-8859-1 encoding (latin-1) as documented by link java.util.Propertiesload(java.io.InputStream)</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>propertiesResolver</strong></span> (common)</p></td><td align="left" valign="top"><p>To use a custom PropertiesResolver</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>PropertiesResolver</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>propertiesParser</strong></span> (common)</p></td><td align="left" valign="top"><p>To use a custom PropertiesParser</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>PropertiesParser</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>cache</strong></span> (common)</p></td><td align="left" valign="top"><p>Whether or not to cache loaded properties. The default value is true.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>propertyPrefix</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Optional prefix prepended to property names before resolution.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>propertySuffix</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Optional suffix appended to property names before resolution.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>fallbackToUnaugmented Property</strong></span> (advanced)</p></td><td align="left" valign="top"><p>If true, first attempt resolution of property name augmented with propertyPrefix and propertySuffix before falling back the plain property name specified. If false, only the augmented property name is searched.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>defaultFallbackEnabled</strong></span> (common)</p></td><td align="left" valign="top"><p>If false, the component does not attempt to find a default for the key by looking after the colon separator.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreMissingLocation</strong></span> (common)</p></td><td align="left" valign="top"><p>Whether to silently ignore if a location cannot be located, such as a properties file not found.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>prefixToken</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets the value of the prefix token used to identify properties to replace. Setting a value of null restores the default token (link link DEFAULT_PREFIX_TOKEN).</p></td><td align="center" valign="top"><p>{{</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>suffixToken</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets the value of the suffix token used to identify properties to replace. Setting a value of null restores the default token (link link DEFAULT_SUFFIX_TOKEN).</p></td><td align="center" valign="top"><p>}}</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>initialProperties</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets initial properties which will be used before any locations are resolved.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>Properties</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>overrideProperties</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets a special list of override properties that take precedence and will use first, if a property exist.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>Properties</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>systemPropertiesMode</strong></span> (common)</p></td><td align="left" valign="top"><p>Sets the system property mode.</p></td><td align="center" valign="top"><p>2</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>resolveProperty Placeholders</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Whether the component should resolve property placeholders on itself when starting. Only properties which are of String type can use property placeholders.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><p>The Properties endpoint is configured using URI syntax:</p><pre class="screen">properties:key</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_1_parameters_144"></a>Path Parameters (1 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>key</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Property key to use as placeholder</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_6_parameters_10"></a>Query Parameters (6 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreMissingLocation</strong></span> (common)</p></td><td align="left" valign="top"><p>Whether to silently ignore if a location cannot be located, such as a properties file not found.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>locations</strong></span> (common)</p></td><td align="left" valign="top"><p>A list of locations to load properties. You can use comma to separate multiple locations. This option will override any default locations and only use the locations from this option.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>bridgeErrorHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions occurred while the consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN/ERROR level and ignored.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exceptionHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions, that will be logged at WARN/ERROR level and ignored.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExceptionHandler</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exchangePattern</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Sets the default exchange pattern when creating an exchange.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExchangePattern</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="imagesdb/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>Resolving property from Java code</strong></span>
You can use the method <code class="literal">resolvePropertyPlaceholders</code> on the
<code class="literal">CamelContext</code> to resolve a property from any Java code.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_propertyplaceholder"></a>Using PropertyPlaceholder</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.3</strong></span></p><p>Camel now provides a new <code class="literal">PropertiesComponent</code> in <span class="strong"><strong>camel-core</strong></span> which
allows you to use property placeholders when defining Camel
Endpoint URIs.</p><p>This works much like you would do if using Spring&#8217;s
<code class="literal">&lt;property-placeholder&gt;</code> tag. However Spring have a limitation which
prevents 3rd party frameworks to leverage Spring property placeholders
to the fullest. See more at
<a class="link" href="how-do-i-use-spring-property-placeholder-with-camel-xml.html" target="_top">How do
I use Spring Property Placeholder with Camel XML</a>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="imagesdb/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>Bridging Spring and Camel property placeholders</strong></span>
From Camel 2.10 onwards, you can bridge the Spring property placeholder
with Camel, see further below for more details.</p></td></tr></table></div><p>The property placeholder is generally in use when doing:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">lookup or creating endpoints</li><li class="listitem">lookup of beans in the Registry</li><li class="listitem">additional supported in Spring XML (see below in examples)</li><li class="listitem">using Blueprint PropertyPlaceholder with Camel
<a class="link" href="properties-component.html" title="Properties Component">Properties</a> component</li><li class="listitem">using <code class="literal">@PropertyInject</code> to inject a property in a POJO</li><li class="listitem"><span class="strong"><strong>Camel 2.14.1</strong></span> Using default value if a property does not exists</li><li class="listitem"><span class="strong"><strong>Camel 2.14.1</strong></span> Include out of the box functions, to lookup property
values from OS environment variables, JVM system properties, or the
service idiom.</li><li class="listitem"><span class="strong"><strong>Camel 2.14.1</strong></span> Using custom functions, which can be plugged into the
property component.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_syntax_3"></a>Syntax</h2></div></div></div><p>The syntax to use Camel&#8217;s property placeholder is to use <code class="literal">{{key}}</code> for
example <code class="literal">{{file.uri}}</code> where <code class="literal">file.uri</code> is the property key.</p><p>You can use property placeholders in parts of the endpoint URI&#8217;s which
for example you can use placeholders for parameters in the URIs.</p><p>From&nbsp;<span class="strong"><strong>Camel 2.14.1</strong></span> onwards you can specify a default value to use if
a property with the key does not exists, eg&nbsp;<code class="literal">file.url:/some/path</code> where
the default value is the text after the colon (eg /some/path).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Do not use colon in the property key. The colon is used as a separator
token when you are providing a default value, which is supported from
<span class="strong"><strong>Camel 2.14.1</strong></span> onwards.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_propertyresolver"></a>PropertyResolver</h2></div></div></div><p>Camel provides a pluggable mechanism which allows 3rd part to provide
their own resolver to lookup properties. Camel provides a default
implementation
<code class="literal">org.apache.camel.component.properties.DefaultPropertiesResolver</code> which
is capable of loading properties from the file system, classpath or
Registry. You can prefix the locations with either:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">ref:</code> <span class="strong"><strong>Camel 2.4:</strong></span> to lookup in the Registry</li><li class="listitem"><code class="literal">file:</code> to load the from file system</li><li class="listitem"><code class="literal">classpath:</code> to load from classpath (this is also the default if no
prefix is provided)</li><li class="listitem"><code class="literal">blueprint:</code> <span class="strong"><strong>Camel 2.7:</strong></span> to use a specific OSGi blueprint placeholder
service</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_location"></a>Defining location</h2></div></div></div><p>The <code class="literal">PropertiesResolver</code> need to know a location(s) where to resolve the
properties. You can define 1 to many locations. If you define the
location in a single String property you can separate multiple locations
with comma such as:</p><pre class="programlisting">pc.setLocation(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"com/mycompany/myprop.properties,com/mycompany/other.properties"</em></strong>);</pre><p><span class="strong"><strong>Available as of Camel 2.19.0</strong></span></p><p>You can set which location can be discarded if missing by by setting the <code class="literal">optional</code> attribute, which is false by default, i.e:</p><pre class="programlisting">pc.setLocations(
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"com/mycompany/override.properties;optional=true"</em></strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"com/mycompany/defaults.properties"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_system_and_environment_variables_in_locations"></a>Using system and environment variables in locations</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.7</strong></span></p><p>The location now supports using placeholders for JVM system properties
and OS environments variables.</p><p>For example:</p><pre class="screen">location=file:${karaf.home}/etc/foo.properties</pre><p>In the location above we defined a location using the file scheme using
the JVM system property with key <code class="literal">karaf.home</code>.</p><p>To use an OS environment variable instead you would have to prefix with
env:</p><pre class="screen">location=file:${env:APP_HOME}/etc/foo.properties</pre><p>Where <code class="literal">APP_HOME</code> is an OS environment.</p><p>You can have multiple placeholders in the same location, such as:</p><pre class="screen">location=file:${env:APP_HOME}/etc/${prop.name}.properties</pre><p>#=== Using system and environment variables to configure property prefixes and suffixes</p><p><span class="strong"><strong>Available as of Camel 2.12.5, 2.13.3, 2.14.0</strong></span></p><p><code class="literal">propertyPrefix</code>, <code class="literal">propertySuffix</code> configuration properties support
using placeholders for JVM system properties and OS environments
variables.</p><p>For example. if&nbsp;<code class="literal">PropertiesComponent</code> is configured with the following
properties file:</p><pre class="screen">dev.endpoint = result1
test.endpoint = result2</pre><p>Then with the following route definition:</p><pre class="programlisting">PropertiesComponent pc = context.getComponent(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties"</em></strong>, PropertiesComponent.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);
pc.setPropertyPrefix(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"${stage}."</em></strong>);
<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
context.addRoutes(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> RouteBuilder() {
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
        from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:mock:{{endpoint}}"</em></strong>);
    }
});</pre><p>it is possible to change the target endpoint by changing system
property&nbsp;<code class="literal">stage</code> either to&nbsp;<code class="literal">dev</code> (the message will be routed
to&nbsp;<code class="literal">mock:result1</code>) or&nbsp;<code class="literal">test</code> (the message will be routed
to&nbsp;<code class="literal">mock:result2</code>).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_configuring_in_java_dsl"></a>Configuring in Java DSL</h2></div></div></div><p>You have to create and register the <code class="literal">PropertiesComponent</code> under the name
<code class="literal">properties</code> such as:</p><pre class="programlisting">PropertiesComponent pc = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> PropertiesComponent();
pc.setLocation(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"classpath:com/mycompany/myprop.properties"</em></strong>);
context.addComponent(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties"</em></strong>, pc);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_configuring_in_spring_xml"></a>Configuring in Spring XML</h2></div></div></div><p>Spring XML offers two variations to configure. You can define a spring
bean as a <code class="literal">PropertiesComponent</code> which resembles the way done in Java
DSL. Or you can use the <code class="literal">&lt;propertyPlaceholder&gt;</code> tag.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"properties"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.camel.component.properties.PropertiesComponent"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"location"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"classpath:com/mycompany/myprop.properties"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong></pre><p>Using the <code class="literal">&lt;propertyPlaceholder&gt;</code> tag makes the configuration a bit more
fresh such as:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">...&gt;</span>
   <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">&lt;propertyPlaceholder</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"properties"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">location</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com/mycompany/myprop.properties"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre><p>Setting the properties location through the location tag works just fine but sometime you have a number of resources to take into account and starting from <span class="strong"><strong>Camel 2.19.0</strong></span> you can set the properties location with a dedicated propertiesLocation:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">...&gt;</span>
  <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">&lt;propertyPlaceholder</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myPropertyPlaceholder"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertiesLocation</strong>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">resolver</span> = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"classpath"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">path</span>     = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com/my/company/something/my-properties-1.properties"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">optional</span> = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"false"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertiesLocation</strong>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">resolver</span> = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"classpath"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">path</span>     = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com/my/company/something/my-properties-2.properties"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">optional</span> = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"false"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertiesLocation</strong>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">resolver</span> = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">path</span>     = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"${karaf.home}/etc/my-override.properties"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">optional</span> = <span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
   <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/propertyPlaceholder&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="imagesdb/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>Specifying the cache option inside XML</strong></span>
Camel 2.10 onwards supports specifying a value for the cache option both
inside the Spring as well as the Blueprint XML.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_a_properties_from_the_registry"></a>Using a Properties from the Registry</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.4</strong></span>
For example in OSGi you may want to expose a service which returns the
properties as a <code class="literal">java.util.Properties</code> object.</p><p>Then you could setup the <a class="link" href="properties-component.html" title="Properties Component">Properties</a> component as
follows:</p><pre class="programlisting"> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertyPlaceholder</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"properties"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">location</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"ref:myProperties"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong></pre><p>Where <code class="literal">myProperties</code> is the id to use for lookup in the OSGi registry.
Notice we use the <code class="literal">ref:</code> prefix to tell Camel that it should lookup the
properties for the Registry.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_examples_using_properties_component"></a>Examples using properties component</h2></div></div></div><p>When using property placeholders in the endpoint URIs you can either use
the <code class="literal">properties:</code> component or define the placeholders directly in the
URI. We will show example of both cases, starting with the former.</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// properties</em>
cool.end=mock:result

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:{{cool.end}}"</em></strong>);</pre><p>You can also use placeholders as a part of the endpoint uri:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// properties</em>
cool.foo=result

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:mock:{{cool.foo}}"</em></strong>);</pre><p>In the example above the to endpoint will be resolved to <code class="literal">mock:result</code>.</p><p>You can also have properties with refer to each other such as:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// properties</em>
cool.foo=result
cool.concat=mock:{{cool.foo}}

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:mock:{{cool.concat}}"</em></strong>);</pre><p>Notice how <code class="literal">cool.concat</code> refer to another property.</p><p>The <code class="literal">properties:</code> component also offers you to override and provide a
location in the given uri using the <code class="literal">locations</code> option:</p><pre class="programlisting">   from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:bar.end?locations=com/mycompany/bar.properties"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_examples_24"></a>Examples</h2></div></div></div><p>You can also use property placeholders directly in the endpoint uris
without having to use <code class="literal">properties:</code>.</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// properties</em>
cool.foo=result

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:{{cool.foo}}"</em></strong>);</pre><p>And you can use them in multiple wherever you want them:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// properties</em>
cool.start=direct:start
cool.showid=true
cool.result=result

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"{{cool.start}}"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:{{cool.start}}?showBodyType=false&amp;showExchangeId={{cool.showid}}"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:{{cool.result}}"</em></strong>);</pre><p>You can also your property placeholders when using
ProducerTemplate for example:</p><pre class="programlisting">template.sendBody(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"{{cool.start}}"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello World"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_example_with_link_linkend_simple_language_simple_link_language"></a>Example with <a class="link" href="simple-language.html" title="Simple Language">Simple</a> language</h2></div></div></div><p>The <a class="link" href="simple-language.html" title="Simple Language">Simple</a> language now also support using property
placeholders, for example in the route below:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// properties</em>
cheese.quote=Camel rocks

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .transform().simple(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hi ${body} do you think ${properties:cheese.quote}?"</em></strong>);</pre><p>You can also specify the location in the <a class="link" href="simple-language.html" title="Simple Language">Simple</a>
language for example:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// bar.properties</em>
bar.quote=Beer tastes good

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// route</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .transform().simple(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hi ${body}. ${properties:com/mycompany/bar.properties:bar.quote}."</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_additional_property_placeholder_supported_in_spring_xml"></a>Additional property placeholder supported in Spring XML</h2></div></div></div><p>The property placeholders is also supported in many of the Camel Spring
XML tags such as
<code class="literal">&lt;package&gt;, &lt;packageScan&gt;, &lt;contextScan&gt;, &lt;jmxAgent&gt;, &lt;endpoint&gt;, &lt;routeBuilder&gt;, &lt;proxy&gt;</code>
and the others.</p><p>The example below has property placeholder in the <code class="literal">&lt;jmxAgent&gt;</code> tag:</p><p>You can also define property placeholders in the various attributes on
the <code class="literal">&lt;camelContext&gt;</code> tag such as <code class="literal">trace</code> as shown here:</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_overriding_a_property_setting_using_a_jvm_system_property"></a>Overriding a property setting using a JVM System Property</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.5</strong></span>
It is possible to override a property value at runtime using a JVM
System property without the need to restart the application to pick up
the change. This may also be accomplished from the command line by
creating a JVM System property of the same name as the property it
replaces with a new value. An example of this is given below</p><pre class="programlisting">PropertiesComponent pc = context.getComponent(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties"</em></strong>, PropertiesComponent.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);
pc.setCache(false);

System.setProperty(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"cool.end"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:override"</em></strong>);
System.setProperty(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"cool.result"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"override"</em></strong>);

context.addRoutes(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> RouteBuilder() {
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
        from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:cool.end"</em></strong>);
        from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:foo"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties:mock:{{cool.result}}"</em></strong>);
    }
});
context.start();

getMockEndpoint(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:override"</em></strong>).expectedMessageCount(<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2</span>);

template.sendBody(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello World"</em></strong>);
template.sendBody(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:foo"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello Foo"</em></strong>);

System.clearProperty(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"cool.end"</em></strong>);
System.clearProperty(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"cool.result"</em></strong>);

assertMockEndpointsSatisfied();</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_property_placeholders_for_any_kind_of_attribute_in_the_xml_dsl"></a>Using property placeholders for any kind of attribute in the XML DSL</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.7</strong></span></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you use OSGi Blueprint then this only works from <span class="strong"><strong>2.11.1</strong></span> or <span class="strong"><strong>2.10.5</strong></span>
onwards.</p></td></tr></table></div><p>Previously it was only the <code class="literal">xs:string</code> type attributes in the XML DSL
that support placeholders. For example often a timeout attribute would
be a <code class="literal">xs:int</code> type and thus you cannot set a string value as the
placeholder key. This is now possible from Camel 2.7 onwards using a
special placeholder namespace.</p><p>In the example below we use the <code class="literal">prop</code> prefix for the namespace
<code class="literal"><a class="link" href="http://camel.apache.org/schema/placeholder" target="_top">http://camel.apache.org/schema/placeholder</a></code> by which we can use the
<code class="literal">prop</code> prefix in the attributes in the XML DSLs. Notice how we use that
in the Multicast to indicate that the option
<code class="literal">stopOnException</code> should be the value of the placeholder with the key
"stop".</p><p>In our properties file we have the value defined as</p><pre class="screen">stop=true</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_blueprint_property_placeholder_with_camel_routes"></a>Using Blueprint property placeholder with Camel routes</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="properties-component.html#_using_osgi_blueprint_property_placeholders_in_camel_routes">Using OSGi blueprint property placeholders in Camel routes</a></span></dt><dt><span class="section"><a href="properties-component.html#_about_placeholder_syntax">About placeholder syntax</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.7</strong></span></p><p>Camel supports Blueprint
which also offers a property placeholder service. Camel supports
convention over configuration, so all you have to do is to define the
OSGi Blueprint property placeholder in the XML file as shown below:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;blueprint</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
           <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:xsi</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.w3.org/2001/XMLSchema-instance"</span>
           <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:cm</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"</span>
           <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xsi:schemaLocation</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"
           http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>

    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- OSGI blueprint property placeholder --&gt;</em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;cm:property-placeholder</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myblueprint.placeholder"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">persistent-id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"camel.blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- list some properties as needed --&gt;</em>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;cm:default-properties&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;cm:property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"result"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:result"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/cm:default-properties&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/cm:property-placeholder&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- in the route we can use {{ }} placeholders which will lookup in blueprint
             as Camel will auto detect the OSGi blueprint property placeholder and use it --&gt;</em>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:foo"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{{result}}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/blueprint&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_using_osgi_blueprint_property_placeholders_in_camel_routes"></a>Using OSGi blueprint property placeholders in Camel routes</h3></div></div></div><p>By default Camel detects and uses OSGi blueprint property placeholder
service. You can disable this by setting the attribute
<code class="literal">useBlueprintPropertyResolver</code> to false on the <code class="literal">&lt;camelContext&gt;</code>
definition.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_about_placeholder_syntax"></a>About placeholder syntax</h3></div></div></div><p>Notice how we can use the Camel syntax for placeholders <code class="literal">{{</code> and <code class="literal">}}</code> in the
Camel route, which will lookup the value from OSGi blueprint.</p><p>The blueprint syntax for placeholders is <code class="literal">${ }</code>. So outside the
<code class="literal">&lt;camelContext&gt;</code> you must use the <code class="literal">${ }</code> syntax. Where as inside
<code class="literal">&lt;camelContext&gt;</code> you must use <code class="literal">{{</code> and <code class="literal">}}</code> syntax.</p><p>OSGi blueprint allows you to configure the syntax, so you can actually
align those if you want.</p><p>You can also explicit refer to a specific OSGi blueprint property
placeholder by its id. For that you need to use the Camel&#8217;s
<code class="literal">&lt;propertyPlaceholder&gt;</code> as shown in the example below:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;blueprint</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
           <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:xsi</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.w3.org/2001/XMLSchema-instance"</span>
           <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:cm</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"</span>
           <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xsi:schemaLocation</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"
           http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>

    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- OSGI blueprint property placeholder --&gt;</em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;cm:property-placeholder</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myblueprint.placeholder"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">persistent-id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"camel.blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- list some properties as needed --&gt;</em>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;cm:default-properties&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;cm:property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"prefix.result"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:result"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/cm:default-properties&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/cm:property-placeholder&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- using Camel properties component and refer to the blueprint property placeholder by its id --&gt;</em>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertyPlaceholder</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"properties"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">location</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blueprint:myblueprint.placeholder"</span>
                             <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">prefixToken</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"[["</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">suffixToken</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"]]"</span>
                             <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">propertyPrefix</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"prefix."</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>

        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- in the route we can use {{ }} placeholders which will lookup in blueprint --&gt;</em>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:foo"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"[[result]]"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/blueprint&gt;</strong></pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_explicit_referring_to_a_osgi_blueprint_placeholder_in_camel"></a>Explicit referring to a OSGi blueprint placeholder in Camel</h2></div></div></div><p>Notice how we use the <code class="literal">blueprint</code> scheme to refer to the OSGi blueprint
placeholder by its id. This allows you to mix and match, for example you
can also have additional schemes in the location. For example to load a
file from the classpath you can do:</p><pre class="screen">location="blueprint:myblueprint.placeholder,classpath:myproperties.properties"</pre><p>Each location is separated by comma.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_overriding_blueprint_property_placeholders_outside_camelcontext"></a>Overriding Blueprint property placeholders outside CamelContext</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.10.4</strong></span></p><p>When using Blueprint property placeholder in the Blueprint XML file, you
can declare the properties directly in the XML file as shown below:</p><p>Notice that we have a <code class="literal">&lt;bean&gt;</code> which refers to one of the properties. And
in the Camel route we refer to the other using the <code class="literal">{{</code> and <code class="literal">}}</code> notation.</p><p>Now if you want to override these Blueprint properties from an unit
test, you can do this as shown below:</p><p>To do this we override and implement the
<code class="literal">useOverridePropertiesWithConfigAdmin</code> method. We can then put the
properties we want to override on the given props parameter. And the
return value <span class="strong"><strong>must</strong></span> be the <code class="literal">persistence-id</code> of the
<code class="literal">&lt;cm:property-placeholder&gt;</code> tag, which you define in the blueprint XML
file.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_cfg_or_properties_file_for_blueprint_property_placeholders"></a>Using .cfg or .properties file for Blueprint property placeholders</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.10.4</strong></span></p><p>When using Blueprint property placeholder in the Blueprint XML file, you
can declare the properties in a <code class="literal">.properties</code> or <code class="literal">.cfg</code> file. If you use
Apache ServieMix / Karaf then this container has a convention that it
loads the properties from a file in the etc directory with the naming
<code class="literal">etc/pid.cfg</code>, where <code class="literal">pid</code> is the <code class="literal">persistence-id</code>.</p><p>For example in the blueprint XML file we have the
<code class="literal">persistence-id="stuff"</code>, which mean it will load the configuration file
as <code class="literal">etc/stuff.cfg</code>.</p><p>Now if you want to unit test this blueprint XML file, then you can
override the <code class="literal">loadConfigAdminConfigurationFile</code> and tell Camel which
file to load as shown below:</p><p>Notice that this method requires to return a <code class="literal">String[]</code> with 2 values. The
1st value is the path for the configuration file to load.
The 2nd value is the <code class="literal">persistence-id</code> of the <code class="literal">&lt;cm:property-placeholder&gt;</code>
tag.</p><p>The <code class="literal">stuff.cfg</code> file is just a plain properties file with the property
placeholders such as:</p><pre class="screen">== this is a comment
greeting=Bye</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_cfg_file_and_overriding_properties_for_blueprint_property_placeholders"></a>Using .cfg file and overriding properties for Blueprint property placeholders</h2></div></div></div><p>You can do both as well. Here is a complete example. First we have the
Blueprint XML file:</p><p>And in the unit test class we do as follows:</p><p>And the <code class="literal">etc/stuff.cfg</code> configuration file contains</p><pre class="screen">greeting=Bye
echo=Yay
destination=mock:result</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_bridging_spring_and_camel_property_placeholders"></a>Bridging Spring and Camel property placeholders</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.10</strong></span></p><p>The Spring Framework does not allow 3rd party frameworks such as Apache
Camel to seamless hook into the Spring property placeholder mechanism.
However you can easily bridge Spring and Camel by declaring a Spring
bean with the type
<code class="literal">org.apache.camel.spring.spi.BridgePropertyPlaceholderConfigurer</code>, which
is a Spring
<code class="literal">org.springframework.beans.factory.config.PropertyPlaceholderConfigurer</code>
type.</p><p>To bridge Spring and Camel you must define a single bean as shown below:</p><p><span class="strong"><strong>Bridging Spring and Camel property placeholders</strong></span></p><p>You <span class="strong"><strong>must not</strong></span> use the spring &lt;context:property-placeholder&gt; namespace
at the same time; this is not possible.</p><p>After declaring this bean, you can define property placeholders using
both the Spring style, and the Camel style within the &lt;camelContext&gt; tag
as shown below:</p><p><span class="strong"><strong>Using bridge property placeholders</strong></span></p><p>Notice how the hello bean is using pure Spring property placeholders
using the <code class="literal">${ }</code> notation. And in the Camel routes we use the Camel
placeholder notation with <code class="literal">{{</code> and <code class="literal">}}</code>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_clashing_spring_property_placeholders_with_camels_simple_language"></a>Clashing Spring property placeholders with Camels Simple language</h2></div></div></div><p>Take notice when using Spring bridging placeholder then the spring <code class="literal">${ }</code>
syntax clashes with the <a class="link" href="simple-language.html" title="Simple Language">Simple</a> in Camel, and therefore
take care. For example:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Exchange.FILE_NAME"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;simple&gt;</strong>{{file.rootdir}}/${in.header.CamelFileName}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/simple&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong></pre><p>clashes with Spring property placeholders, and you should use <code class="literal">$simple{ }</code>
to indicate using the <a class="link" href="simple-language.html" title="Simple Language">Simple</a> language in Camel.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Exchange.FILE_NAME"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;simple&gt;</strong>{{file.rootdir}}/$simple{in.header.CamelFileName}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/simple&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong></pre><p>An alternative is to configure the <code class="literal">PropertyPlaceholderConfigurer</code> with
<code class="literal">ignoreUnresolvablePlaceholders</code> option to <code class="literal">true</code>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_overriding_properties_from_camel_test_kit"></a>Overriding properties from Camel test kit</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="properties-component.html#_providing_properties_from_within_unit_test_source">Providing properties from within unit test source</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.10</strong></span></p><p>When Testing with Camel and using the
<a class="link" href="properties-component.html" title="Properties Component">Properties</a> component, you may want to be able to
provide the properties to be used from directly within the unit test
source code.
This is now possible from Camel 2.10 onwards, as the Camel test kits, eg
<code class="literal">CamelTestSupport</code> class offers the following methods</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">useOverridePropertiesWithPropertiesComponent</code></li><li class="listitem"><code class="literal">ignoreMissingLocationWithPropertiesComponent</code></li></ul></div><p>So for example in your unit test classes, you can override the
<code class="literal">useOverridePropertiesWithPropertiesComponent</code> method and return a
<code class="literal">java.util.Properties</code> that contains the properties which should be
preferred to be used.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_providing_properties_from_within_unit_test_source"></a>Providing properties from within unit test source</h3></div></div></div><p>This can be done from any of the Camel Test kits, such as camel-test,
camel-test-spring, and camel-test-blueprint.</p><p>The <code class="literal">ignoreMissingLocationWithPropertiesComponent</code> can be used to
instruct Camel to ignore any locations which was not discoverable, for
example if you run the unit test, in an environment that does not have
access to the location of the properties.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_propertyinject"></a>Using @PropertyInject</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.12</strong></span></p><p>Camel allows to inject property placeholders in POJOs using the
<code class="literal">@PropertyInject</code> annotation which can be set on fields and setter
methods.</p><p>For example you can use that with <code class="literal">RouteBuilder</code> classes, such as shown
below:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyRouteBuilder <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PropertyInject("hello")</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">private</strong> String greeting;

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
        from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
            .transform().constant(greeting)
            .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"{{result}}"</em></strong>);
    }

}</pre><p>Notice we have annotated the greeting field with <code class="literal">@PropertyInject</code> and
define it to use the key <code class="literal">"hello"</code>. Camel will then lookup the property
with this key and inject its value, converted to a String type.</p><p>You can also use multiple placeholders and text in the key, for example
we can do:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PropertyInject("Hello {{name}} how are you?")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">private</strong> String greeting;</pre><p>This will lookup the placeholder with they key <code class="literal">"name"</code>.</p><p>You can also add a default value if the key does not exists, such as:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PropertyInject(value = "myTimeout", defaultValue = "5000")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">private</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">int</strong> timeout;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_out_of_the_box_functions"></a>Using out of the box functions</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14.1</strong></span></p><p>The&nbsp;<a class="link" href="properties-component.html" title="Properties Component">Properties</a>&nbsp;component includes the following
functions out of the box</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">env</code> - A function to lookup the property from OS environment variables</li><li class="listitem"><code class="literal">sys</code> - A function to lookup the property from Java JVM system
properties</li><li class="listitem"><code class="literal">service</code> - A function to lookup the property from OS environment
variables using the service naming idiom</li><li class="listitem"><code class="literal">service.name</code> - <span class="strong"><strong>Camel 2.16.1:&nbsp;</strong></span>A function to lookup the
property&nbsp;from OS environment variables using the service naming idiom
returning the hostname part only</li><li class="listitem"><code class="literal">service.port</code>&nbsp;- <span class="strong"><strong>Camel 2.16.1:&nbsp;</strong></span>A function to lookup the
property&nbsp;from OS environment variables using the service naming idiom
returning the port part only</li></ul></div><p>As you can see these functions is intended to make it easy to lookup
values from the environment. As they are provided out of the box, they
can easily be used as shown below:</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{`{env:SOMENAME}`}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{`{sys:MyJvmPropertyName}`}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre><p>You can use default values as well, so if the property does not exists,
you can define a default value as shown below, where the default value
is a <code class="literal">log:foo</code> and <code class="literal">log:bar</code> value.</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{`{env:SOMENAME:log:foo}`}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{`{sys:MyJvmPropertyName:log:bar}`}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre><p>&nbsp;</p><p>The service function is for looking up a service which is defined using
OS environment variables using the service naming idiom, to refer to a
service location using <code class="literal">hostname : port</code></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="emphasis"><em>NAME</em></span><span class="strong"><strong>_SERVICE_HOST</strong></span></li><li class="listitem"><span class="emphasis"><em>NAME</em></span><span class="strong"><strong>_SERVICE_PORT</strong></span></li></ul></div><p>in other words the service uses <code class="literal">_SERVICE_HOST</code> and <code class="literal">_SERVICE_PORT</code> as
prefix. So if the service is named FOO, then the OS environment
variables should be set as</p><pre class="screen">export $FOO_SERVICE_HOST=myserver
export $FOO_SERVICE_PORT=8888</pre><p>For example if the FOO service a remote HTTP service, then we can refer
to the service in the Camel endpoint uri, and use
the&nbsp;<a class="link" href="http-component.html" title="HTTP Component (deprecated)">HTTP</a>&nbsp;component to make the HTTP call:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://{`{service:FOO}`}/myapp"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre><p>And we can use default values if the service has not been defined, for
example to call a service on localhost, maybe for unit testing etc</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://{`{service:FOO:localhost:8080}`}/myapp"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_custom_functions"></a>Using custom functions</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14.1</strong></span></p><p>The <a class="link" href="properties-component.html" title="Properties Component">Properties</a> component allow to plugin 3rd party
functions which can be used during&nbsp;parsing of the property placeholders.
These functions are then able to do custom logic to resolve the
placeholders, such as looking up in databases, do custom computations,
or whatnot. The name of the function becomes the prefix used in the
placeholder. This is best illustrated in the example code below</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"beerFunction"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"MyBeerFunction"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertyPlaceholder</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"properties"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;propertiesFunction</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"beerFunction"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/propertyPlaceholder&gt;</strong>

  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{`{beer:FOO}`}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"{`{beer:BAR}`}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>from <span class="strong"><strong>camel 2.19.0</strong></span> the location attribute (on propertyPlaceholder tag) is not more mandatory</p></td></tr></table></div><p>Here we have a Camel XML route where we have defined the
<code class="literal">&lt;propertyPlaceholder&gt;</code> to use a custom function, which we refer to be the
bean id - eg the <code class="literal">beerFunction</code>. As the beer function uses <code class="literal">"beer"</code> as its
name, then the placeholder syntax can trigger the beer function by
starting with <code class="literal">beer:value</code>.</p><p>The implementation of the function is only two methods as shown below:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">static</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">final</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyBeerFunction <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">implements</strong> PropertiesFunction {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> String getName() {
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"beer"</em></strong>;
    }

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> String apply(String remainder) {
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:"</em></strong> + remainder.toLowerCase();
    }
}</pre><p>The function must implement
the&nbsp;<code class="literal">org.apache.camel.component.properties.PropertiesFunction</code>
interface. The method&nbsp;<code class="literal">getName</code> is &nbsp;the name of the function, eg beer.
And the&nbsp;<code class="literal">apply</code> method is where we implement the custom logic to do. As
the sample code is from an unit test, it just returns a value to refer
to a mock endpoint.</p><p>To register a custom function from Java code is as shown below:</p><pre class="programlisting">PropertiesComponent pc = context.getComponent(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"properties"</em></strong>, PropertiesComponent.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);
pc.addFunction(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> MyBeerFunction());</pre><p>&nbsp;</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_see_also_101"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="properties-component.html" title="Properties Component">Properties</a> component</li><li class="listitem">Jasypt for using encrypted values (eg passwords) in
the properties</li></ul></div></div></div></body></html>