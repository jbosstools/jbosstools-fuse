<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>ActiveMQ Journal</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="keywords" content="Fuse IDE, Apache Camel, Open Source, open source, Fuse, FuseSource, Apache Camel, EIP, Enterprise Integration Patterns"><meta name="keywords" content="Fuse IDE, Apache Camel, Open Source, open source, Fuse, FuseSource, Apache Camel, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Fuse IDE"><link rel="up" href="RiderFileEptRef.html" title="File Endpoints"><link rel="prev" href="RiderFileEptRef.html" title="File Endpoints"><link rel="next" href="file.html" title="File"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="ActiveMQ Journal"><a name="ActiveMQJournal"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ActiveMQ Journal &#8212; stores messages in rolling log file for later processing</p></div><div class="refsection" title="Overview"><a name="d0e22192"></a><h2>Overview</h2><p>The ActiveMQ Journal Component allows messages to be stored in a rolling log file and then 
      consumed from that log file. The journal aggregates and batches up concurrent writes so that
      the overhead of writing and waiting for the disk sync is relatively constant, regardless of
      how many concurrent writes are being done. Therefore, this component supports and encourages
      you to use multiple concurrent producers to the same journal endpoint.</p><p>Each journal endpoint uses a different log file and therefore write batching (and the
      associated performance boost) does not occur between multiple endpoints.</p><p>This component only supports one active consumer on the endpoint. After the message is
      processed by the consumer's processor, the log file is marked and only subsequent messages in
      the log file will get delivered to consumers.</p></div><div class="refsection" title="URI format"><a name="d0e22201"></a><h2>URI format</h2><p>The URI format for an ActiveMQ Journal endpoint is:</p><pre class="programlisting">activemq.journal:<em class="replaceable"><code>directoryName</code></em>[?options]</pre><p><em class="replaceable"><code>directoryName</code></em> specifies the name of the directory in which the 
      journal is stored. For example, to send to a journal located in the 
      <code class="filename">/tmp/data</code> directory you would use the following URI:</p><pre class="programlisting">activemq.journal:/tmp/data</pre></div><div class="refsection" title="Options"><a name="d0e22220"></a><h2>Options</h2><p><a class="xref" href="ActiveMQJournal.html#AMQJOptionsTbl" title="Table&nbsp;6.&nbsp;ActiveMQ Journal optionss">Table&nbsp;6, &#8220;ActiveMQ Journal optionss&#8221;</a> lists the options available when using an ActiveMQ Journal 
    endpoint.</p><div class="table"><a name="AMQJOptionsTbl"></a><p class="title"><b>Table&nbsp;6.&nbsp;ActiveMQ Journal optionss</b></p><div class="table-contents"><table summary="ActiveMQ Journal optionss" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name </th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">syncConsume</code></td><td><code class="literal">false</code></td><td> If set to <code class="literal">true</code>, when the journal is marked after a message 
              is consumed, the endpoint wait until the operating system has verified the mark 
              update is safely stored on disk.</td></tr><tr><td><code class="literal">syncProduce</code></td><td><code class="literal">true</code></td><td>If set to <code class="literal">true</code>, wait until the operating system has verified 
            the message is safely stored on disk.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection" title="Expected Exchange Data Types"><a name="d0e22263"></a><h2>Expected Exchange Data Types</h2><p>The consumer of a Journal endpoint generates <code class="classname">DefaultExchange</code> objects with 
      the <span class="emphasis"><em>In</em></span> message set as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code">journal</code> header: set to the endpoint URI of the journal the message came
          from.</p></li><li class="listitem"><p><code class="code">location</code> header: location: set to a <code class="classname">Location</code> 
          object which identifies where the recored was stored on disk.</p></li><li class="listitem"><p>Message body: set to a <code class="code">ByteSequence</code>, which contains the byte array data of 
          the stored message.</p></li></ul></div><p>The producer to a Journal endpoint expects an exchange with an <span class="emphasis"><em>In</em></span> message 
      where the body can be converted to a <code class="code">ByteSequence</code> or a <code class="code">byte[]</code>.</p></div></div></body></html>