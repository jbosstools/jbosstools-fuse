<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Quartz</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat Fuse IDE"><link rel="up" href="scheduling.html" title="Scheduling Endpoints"><link rel="prev" href="scheduling.html" title="Scheduling Endpoints"><link rel="next" href="timer.html" title="Timer"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><a name="quartz"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Quartz &#8212; provides a scheduled delivery of messages using the Quartz scheduler</p></div><div class="refsection"><a name="d0e34684"></a><h2>Dependencies</h2><p>Maven users will need to add the dependency shown in <a class="xref" href="quartz.html#quartzPOM" title="Example&nbsp;15.&nbsp;Quartz dependency">Example&nbsp;15, &#8220;Quartz dependency&#8221;</a> to 
      their <code class="filename">pom.xml</code> to use this component.</p><div class="example"><a name="quartzPOM"></a><p class="title"><b>Example&nbsp;15.&nbsp;Quartz dependency</b></p><div class="example-contents"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-quartz<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div></div><br class="example-break"></div><div class="refsection"><a name="d0e34699"></a><h2>URI format</h2><pre class="programlisting">quartz://<em class="replaceable"><code>groupName</code></em>/<em class="replaceable"><code>timerName</code></em>?<em class="replaceable"><code>options</code></em>
quartz://<em class="replaceable"><code>groupName</code></em>/<em class="replaceable"><code>timerName</code></em>/?cron=<em class="replaceable"><code>expression</code></em>&amp;<em class="replaceable"><code>options</code></em>
quartz://<em class="replaceable"><code>timerName</code></em>?<em class="replaceable"><code>options</code></em>
quartz://<em class="replaceable"><code>timerName</code></em>?cron=<em class="replaceable"><code>expression</code></em>&amp;<em class="replaceable"><code>options</code></em></pre><p>The component uses either a <code class="literal">CronTrigger</code> or a
        <code class="literal">SimpleTrigger</code>. If no cron expression is provided, the component uses a
      simple trigger. If no <code class="literal">groupName</code> is provided, the quartz component uses the
        <code class="literal">Camel</code> group name.</p></div><div class="refsection"><a name="d0e34753"></a><h2>Options</h2><p><a class="xref" href="quartz.html#QuartzRefOptsTbl" title="Table&nbsp;45.&nbsp;Quartz options">Table&nbsp;45, &#8220;Quartz options&#8221;</a> lists the options for a Quartz endpoint.</p><div class="table"><a name="QuartzRefOptsTbl"></a><p class="title"><b>Table&nbsp;45.&nbsp;Quartz options</b></p><div class="table-contents"><table summary="Quartz options" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">cron</code></td><td>&nbsp;</td><td>Specifies a cron expression. This option is not compatible with the 
              <code class="code">trigger.\*</code> or <code class="code">job.\*</code> options.</td></tr><tr><td><code class="code">trigger.repeatCount</code></td><td><code class="code">0</code></td><td>Specifies how many times the timer repeats.</td></tr><tr><td><code class="code">trigger.repeatInterval</code></td><td><code class="code">0</code></td><td>Specifies the amount of time, in milliseconds, between repeated 
            triggers.</td></tr><tr><td><code class="code">job.name</code></td><td>&nbsp;</td><td>Specifies the job name.</td></tr><tr><td><code class="code">job.<em class="replaceable"><code>XXX</code></em></code></td><td>&nbsp;</td><td>Specifies the job option with the <em class="replaceable"><code>XXX</code></em> setter 
            name.</td></tr><tr><td><code class="code">trigger.<em class="replaceable"><code>XXX</code></em></code></td><td>&nbsp;</td><td>Specifies the trigger option with the <em class="replaceable"><code>XXX</code></em> setter 
            name.</td></tr><tr><td><code class="code">stateful</code></td><td><code class="code">false</code></td><td>Specifies if the timer uses a Quartz <code class="code">StatefulJob</code> instead of the 
            default job.</td></tr><tr><td><code class="code">fireNow</code></td><td><code class="code">false</code></td><td>Specifies if the endpoint will fire the trigger at route start-up when using 
              <code class="code">SimpleTrigger</code>.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection"><a name="d0e34858"></a><h2>Configuring quartz.properties file</h2><p>By default Quartz will look for a <code class="filename">quartz.properties</code> file in the 
      root of the classpath. If you deploy your route as a WAR, the default location for the 
      <code class="filename">quartz.properties</code> file is <code class="filename">WEB-INF/classes</code>.</p><p>The Quartz endpoint allows you to configure properties using either a URI option or 
    Spring XML configuration. <a class="xref" href="quartz.html#QuartzRefPropOptsTbl" title="Table&nbsp;46.&nbsp;Quartz properties options">Table&nbsp;46, &#8220;Quartz properties options&#8221;</a> lists the options for 
    setting the Quartz properties.</p><div class="table"><a name="QuartzRefPropOptsTbl"></a><p class="title"><b>Table&nbsp;46.&nbsp;Quartz properties options</b></p><div class="table-contents"><table summary="Quartz properties options" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">properties</code></td><td><code class="code">Properties</code></td><td>Specifies a <code class="literal">java.util.Propoperties</code> instance containing the 
            Quartz properties.</td></tr><tr><td><code class="code">propertiesFile</code></td><td><code class="code">String</code></td><td>Specifies the file name of the properties to load from the classpath.</td></tr></tbody></table></div></div><br class="table-break"><p><a class="xref" href="quartz.html#QuartzRefPropOptsEx" title="Example&nbsp;16.&nbsp;Setting the Quartz properties">Example&nbsp;16, &#8220;Setting the Quartz properties&#8221;</a> show how to set the file name in Spring XML.</p><div class="example"><a name="QuartzRefPropOptsEx"></a><p class="title"><b>Example&nbsp;16.&nbsp;Setting the Quartz properties</b></p><div class="example-contents"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"quartz"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.camel.component.quartz.QuartzComponent"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"propertiesFile"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com/mycompany/myquartz.properties"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong></pre></div></div><br class="example-break"></div><div class="refsection"><a name="d0e34919"></a><h2>Starting the Quartz scheduler</h2><p>The Quartz endpoint can configure the Quartz scheduler be started delayed, or not auto 
      started at all. <a class="xref" href="quartz.html#QuartzRefStartOptsTbl" title="Table&nbsp;47.&nbsp;Quartz scheduler start up options">Table&nbsp;47, &#8220;Quartz scheduler start up options&#8221;</a> lists the options for configuring 
      how the Quartz scheduler is started.</p><div class="table"><a name="QuartzRefStartOptsTbl"></a><p class="title"><b>Table&nbsp;47.&nbsp;Quartz scheduler start up options</b></p><div class="table-contents"><table summary="Quartz scheduler start up options" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">startDelayedSeconds</code></td><td><code class="code">0</code></td><td>Specifies the number of seconds to wait before starting the quartz 
            scheduler.</td></tr><tr><td><code class="code">autoStartScheduler</code></td><td><code class="code">true</code></td><td>Specifies if the scheduler should be auto started.</td></tr></tbody></table></div></div><br class="table-break"><p><a class="xref" href="quartz.html#QuartzRefStartOptsEx" title="Example&nbsp;17.&nbsp;Setting the Quartz scheduler delay">Example&nbsp;17, &#8220;Setting the Quartz scheduler delay&#8221;</a> show how to set the scheduler delay in Spring 
    XML.</p><div class="example"><a name="QuartzRefStartOptsEx"></a><p class="title"><b>Example&nbsp;17.&nbsp;Setting the Quartz scheduler delay</b></p><div class="example-contents"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"quartz"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.camel.component.quartz.QuartzComponent"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"startDelayedSeconds"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"5"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong></pre></div></div><br class="example-break"></div><div class="refsection"><a name="d0e34966"></a><h2>Message Headers</h2><p>Apache Camel adds the getters from the Quartz Execution Context as header values. The
            following headers are added: <code class="literal">calendar</code>, <code class="literal">fireTime</code>,
                <code class="literal">jobDetail</code>, <code class="literal">jobInstance</code>,
                <code class="literal">jobRuntTime</code>, <code class="literal">mergedJobDataMap</code>,
                <code class="literal">nextFireTime</code>, <code class="literal">previousFireTime</code>,
                <code class="literal">refireCount</code>, <code class="literal">result</code>,
                <code class="literal">scheduledFireTime</code>, <code class="literal">scheduler</code>,
                <code class="literal">trigger</code>, <code class="literal">triggerName</code>,
                <code class="literal">triggerGroup</code>.</p><p>The <code class="literal">fireTime</code> header contains the <code class="literal">java.util.Date</code> of
      when the exchange was fired.</p></div><div class="refsection"><a name="d0e35024"></a><h2>Related topics</h2><table border="0" summary="Simple list" class="simplelist"><tr><td><a href="PLUGINS_ROOT/com.fusesource.rider.help/timer.html" class="olink">Timer</a></td></tr></table></div></div></body></html>