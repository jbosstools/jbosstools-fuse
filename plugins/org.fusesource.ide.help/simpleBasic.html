<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Basic syntax</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="simpleLang.html" title="The Simple Language"><link rel="prev" href="simpleLang.html" title="The Simple Language"><link rel="next" href="simpleOGNL.html" title="OGNL expressions"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="simpleBasic"></a>Basic syntax</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10465"></a>Overview</h3></div></div></div><p>Simple language expressions and predicates combine plain text strings, variables, 
      and property placeholders in a straight forward manner. The most basic expression will 
      contain a single variable. More complex expressions will use variables to fill in portions 
      of text strings.</p><p>Simple language expressions can also use OGNL notation as discussed in 
        <a href="PLUGINS_ROOT/org.fusesource.ide.help/simpleOGNL.html" class="olink">OGNL expressions</a>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10474"></a>Variables</h3></div></div></div><p>Expressions using the Simple language are typically a combination of 
      variables and text strings that are used to create messages.</p><p><a class="xref" href="simpleBasic.html#FMRS.Dsl.TableVSL" title="Table&nbsp;10.&nbsp;Simple language variable">Table&nbsp;10, &#8220;Simple language variable&#8221;</a> shows all of the variables supported by the 
      simple language.</p><div class="table"><a name="FMRS.Dsl.TableVSL"></a><p class="title"><b>Table&nbsp;10.&nbsp;Simple language variable</b></p><div class="table-contents"><table summary="Simple language variable" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Variable</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">exchangeId</code></td><td><code class="code">String</code></td><td>The exchange's ID value.</td></tr><tr><td><code class="code">id</code></td><td><code class="code">String</code></td><td>The <span class="emphasis"><em>In</em></span> message ID value.</td></tr><tr><td><code class="literal">body</code>
              </td><td><code class="code">Object</code></td><td>
                <p>The <span class="emphasis"><em>In</em></span> message body. <span class="emphasis"><em>Supports OGNL
                    expressions.</em></span></p>
              </td></tr><tr><td><code class="code">in.body</code></td><td><code class="code">Object</code></td><td>The <span class="emphasis"><em>In</em></span> message body. <span class="emphasis"><em>Supports OGNL
                  expressions.</em></span></td></tr><tr><td><code class="literal">out.body</code>
              </td><td><code class="code">Object</code></td><td>
                <p>The <span class="emphasis"><em>Out</em></span> message body.</p>
              </td></tr><tr><td><code class="code">bodyAs(<em class="replaceable"><code>Type</code></em>)</code></td><td><em class="replaceable"><code>Type</code></em></td><td>The <span class="emphasis"><em>In</em></span> message body, converted to the specified type. All
                types, <em class="replaceable"><code>Type</code></em>, must be specified using their
                fully-qualified Java name, except for the types: <code class="code">byte[]</code>,
                  <code class="code">String</code>, <code class="code">Integer</code>, and <code class="code">Long</code>. The converted
                body can be null.</td></tr><tr><td><code class="code">mandatoryBodyAs(<em class="replaceable"><code>Type</code></em>)</code></td><td><em class="replaceable"><code>Type</code></em></td><td>The <span class="emphasis"><em>In</em></span> message body, converted to the specified type. All
                types, <em class="replaceable"><code>Type</code></em>, must be specified using their
                fully-qualified Java name, except for the types: <code class="code">byte[]</code>,
                  <code class="code">String</code>, <code class="code">Integer</code>, and <code class="code">Long</code>. The converted
                body is expected to be non-null.</td></tr><tr><td><code class="literal">header.</code>
                <em class="replaceable"><code>HeaderName</code></em></td><td><code class="code">Object</code></td><td>
                <p>The <span class="emphasis"><em>In</em></span> message's <em class="replaceable"><code>HeaderName</code></em>
                  header. <span class="emphasis"><em>Supports OGNL expressions.</em></span></p>
              </td></tr><tr><td><code class="literal">headers.</code>
                <em class="replaceable"><code>HeaderName</code></em></td><td><code class="code">Object</code></td><td>The <span class="emphasis"><em>In</em></span> message's <em class="replaceable"><code>HeaderName</code></em>
                header.</td></tr><tr><td><code class="literal">in.header.</code>
                <em class="replaceable"><code>HeaderName</code></em></td><td><code class="code">Object</code></td><td>The <span class="emphasis"><em>In</em></span> message's <em class="replaceable"><code>HeaderName</code></em>
                header. <span class="emphasis"><em>Supports OGNL expressions.</em></span></td></tr><tr><td><code class="literal">in.headers.</code>
                <em class="replaceable"><code>HeaderName</code></em></td><td><code class="code">Object</code></td><td>The <span class="emphasis"><em>In</em></span> message's <em class="replaceable"><code>HeaderName</code></em>
                header. <span class="emphasis"><em>Supports OGNL expressions.</em></span></td></tr><tr><td><code class="literal">out.header.</code>
                <em class="replaceable"><code>HeaderName</code></em>
              </td><td><code class="code">Object</code></td><td>
                <p>The <span class="emphasis"><em>Out</em></span> message's <em class="replaceable"><code>HeaderName</code></em>
                  header.</p>
              </td></tr><tr><td><code class="literal">out.headers.</code>
                <em class="replaceable"><code>HeaderName</code></em></td><td><code class="code">Object</code></td><td>The <span class="emphasis"><em>Out</em></span> message's <em class="replaceable"><code>HeaderName</code></em>
                header.</td></tr><tr><td><code class="code">headerAs(<em class="replaceable"><code>Key</code></em>,<em class="replaceable"><code>Type</code></em>)</code></td><td><em class="replaceable"><code>Type</code></em></td><td>The <em class="replaceable"><code>Key</code></em> header, converted to the specified type. All
                types, <em class="replaceable"><code>Type</code></em>, must be specified using their
                fully-qualified Java name, except for the types: <code class="code">byte[]</code>,
                  <code class="code">String</code>, <code class="code">Integer</code>, and <code class="code">Long</code>. The converted
                value can be null.</td></tr><tr><td><code class="literal">property.</code>
                <em class="replaceable"><code>PropertyName</code></em>
              </td><td><code class="code">Object</code></td><td>
                <p>The <em class="replaceable"><code>PropertyName</code></em> property on the exchange.</p>
              </td></tr><tr><td><code class="code">sys.</code><em class="replaceable"><code>SysPropertyName</code></em></td><td><code class="code">String</code></td><td>The <em class="replaceable"><code>SysPropertyName</code></em> Java system property.</td></tr><tr><td><code class="code">sysenv.</code><em class="replaceable"><code>SysEnvVar</code></em></td><td><code class="code">String</code></td><td>The <em class="replaceable"><code>SysEnvVar</code></em> system environment variable.</td></tr><tr><td><code class="code">exception</code></td><td><code class="code">String</code></td><td>Either the exception object from <code class="code">Exchange.getException()</code> or, if
                this value is null, the caught exception from the
                  <code class="code">Exchange.EXCEPTION_CAUGHT</code> property; otherwise null.
                  <span class="emphasis"><em>Supports OGNL expressions.</em></span></td></tr><tr><td><code class="code">exception.message</code></td><td><code class="code">String</code></td><td>The exception message on the exchange or <code class="code">null</code>, if no exception is
                set.</td></tr><tr><td><code class="code">date:</code><em class="replaceable"><code>command</code></em><code class="code">:</code><em class="replaceable"><code>pattern</code></em></td><td><code class="code">String</code></td><td>A date formatted using a <a class="link" href="http://java.sun.com/j2se/1.5.0/docs/api/java/text/SimpleDateFormat.html" target="_top">java.text.SimpleDateFormat</a> pattern. The following commands are supported:
                  <code class="code">now</code>, for the current date and time;
                  <code class="code">header.</code><em class="replaceable"><code>HeaderName</code></em>, or
                  <code class="code">in.header.</code><em class="replaceable"><code>HeaderName</code></em> to use a <a class="link" href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html" target="_top">java.util.Data</a> object in the <em class="replaceable"><code>HeaderName</code></em> header
                from the <span class="emphasis"><em>In</em></span> message;
                  <code class="code">out.header.</code><em class="replaceable"><code>HeaderName</code></em> to use a <a class="link" href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html" target="_top">java.util.Data</a> object in the <em class="replaceable"><code>HeaderName</code></em> header
                from the <span class="emphasis"><em>Out</em></span> message;</td></tr><tr><td><code class="code">bean:</code><em class="replaceable"><code>beanRef</code></em></td><td><code class="code">Object</code></td><td>Invokes a method on the referenced bean. To specify a method name, you can
                either append a dot, <code class="code">.</code>, followed by the method name; or you can use the
                  <code class="code">?method=</code><em class="replaceable"><code>methodName</code></em> syntax.</td></tr><tr><td><code class="code">properties:<em class="replaceable"><code>Key</code></em></code></td><td><code class="code">String</code></td><td>The value of the <em class="replaceable"><code>Key</code></em> property placeholder.</td></tr><tr><td><code class="code">properties:<em class="replaceable"><code>Location</code></em>:<em class="replaceable"><code>Key</code></em></code></td><td><code class="code">String</code></td><td>The value of the <em class="replaceable"><code>Key</code></em> property placeholder, where the
                location of the properties file is given by <em class="replaceable"><code>Location</code></em>.</td></tr><tr><td><code class="code">threadName</code></td><td><code class="code">String</code></td><td>The name of the current thread.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10970"></a>Basic expression</h3></div></div></div><p>You can use the simple language to define string expressions, based on the variables 
        provided. For example, you can use a variable of the form, 
        <code class="code">in.header.<em class="replaceable"><code>HeaderName</code></em></code>, to obtain the value of the 
        <em class="replaceable"><code>HeaderName</code></em> header, as follows:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;language</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">language</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"simple"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>in.header.foo<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/language&gt;</strong></pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10987"></a>Variables embedded in a string</h3></div></div></div><p>You can embed simple variables in a string expression, but in this case you must 
        enclose the variables in <code class="code">${ }</code> (when you reference a variable on its own, 
        the enclosing braces are optional)&#8212;for example:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;language</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">language</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"simple"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  Received a message from ${in.header.user} on $(date:in.header.date:yyyyMMdd}.
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/language&gt;</strong></pre></div><p>Sometimes&#8212;for example, if you have enabled Spring property placeholders or OSGi 
        blueprint property placeholders&#8212;you might find that the 
        <code class="code">${<em class="replaceable"><code>Expression</code></em>}</code> syntax clashes with another property 
        placeholder syntax. In this case, you can disambiguate the placeholder using the 
        alternative syntax, <code class="code">$simple{<em class="replaceable"><code>Expression</code></em>}</code>, for the 
        simple expression. For example:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;simple&gt;</strong>Hello $simple{in.header.name}, how are you?<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/simple&gt;</strong></pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e11017"></a>Date variables</h3></div></div></div><p>As well as providing variables that access all of the different parts of an exchange, 
      the simple language also provides special variables for formatting dates:</p><div class="informalexample"><pre class="programlisting">date:<em class="replaceable"><code>command</code></em><code class="code">:</code><em class="replaceable"><code>pattern</code></em></pre></div><p>For example, you can use the date variables as follows:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;language</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">language</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"simple"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>Todays date is ${date:now:yyyyMMdd}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/language&gt;</strong></pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e11038"></a>Bean variables</h3></div></div></div><p>The simple language also provides special variables for calling bean methods:</p><div class="informalexample"><pre class="programlisting">bean:<em class="replaceable"><code>beanRef</code></em></pre></div><p>For example, you can use the bean variables as follows:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;language</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">language</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"simple"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  The order type is ${bean:orderService?method=getOrderType}
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/language&gt;</strong></pre></div></div></div></body></html>