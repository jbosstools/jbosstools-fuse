<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>To Trace a Message Through a Route</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="description" content="This tutorial walks you through the process of tracing a message through a route."><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderTutorials.html" title="Tutorials"><link rel="prev" href="RiderTutorialCBR.html" title="To Add a Content-Based Router"><link rel="next" href="RiderTutorialJUnit.html" title="To Test a Route with JUnit"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="RiderTutorialTrace"></a>To Trace a Message Through a Route</h1></div><div><a href="rh-d0e13215.html">Revision History</a></div><div><div class="abstract"><p>This tutorial walks you through the process of tracing a message through a
                route.</p></div></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13230"></a>Goals</h2></div></div></div><p>In this tutorial you will:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>run a route in the <span class="guilabel">Fuse Integration</span> perspective</p></li><li class="listitem"><p>enable tracing on your route</p></li><li class="listitem"><p>drop messages onto your route and track them through the route's nodes</p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13248"></a>Prerequisites</h2></div></div></div><p>To complete this tutorial you will need the <code class="filename">simple-route</code> project
            you updated in <a class="xref" href="RiderTutorialCBR.html" title="To Add a Content-Based Router"><i>To Add a Content-Based Router</i></a>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13258"></a>Procedure</h2></div></div></div><p>To trace a message through your route:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Select <span class="guimenu">Window</span> &gt; <span class="guisubmenu">Open
                    Perspective</span> &gt; <span class="guimenuitem">Other...</span> &gt; <span class="guimenuitem">Fuse Integration</span> to open the
                        <span class="guilabel">Fuse Integration</span> perspective as shown in <a class="xref" href="RiderTutorialTrace.html#RiderTutorialFIperspect" title="Figure&nbsp;11.&nbsp;Fuse Integration perspective">Figure&nbsp;11, &#8220;Fuse Integration perspective&#8221;</a>).</p><div class="figure"><a name="RiderTutorialFIperspect"></a><p class="title"><b>Figure&nbsp;11.&nbsp;Fuse Integration perspective</b></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="540"><tr><td align="center"><img src="images/tutFIPersp6_1.png" align="middle" width="540" alt="Fuse Integration perspective layout"></td></tr></table></div></div></div><br class="figure-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can use the <span class="guilabel">Open Perspective</span> icon (<span class="inlinemediaobject"><img src="images/NewPerspectIcon.jpg" alt="Open Perspective icon"></span>) in the perspectives tab to access the list of
                        available perspectives.</p></td></tr></table></div></li><li class="step"><p>In <span class="guilabel">Project Explorer</span>, expand the
                        <code class="filename">simple-route</code> project to expose the
                        <code class="filename">src/main/resources/META-INF/spring/camel-context.xml</code>
                    file.</p></li><li class="step"><p>Select <span class="guimenu">Run As</span> &gt; <span class="guimenuitem">Local Camel Context (without tests)</span>
                    from the <code class="filename">camel-context.xml</code> file's context menu.</p></li><li class="step"><p>In <span class="guilabel">Fuse JMX Navigator</span>, expand <span class="guilabel">Local
                        Processes</span>.</p></li><li class="step"><p>Double click <span class="guimenuitem">Local Camel Context
                        [<em class="replaceable"><code>id</code></em>]</span> to connect to the context and
                    expand the elements of your route as shown in <a class="xref" href="RiderTutorialTrace.html#RiderTutMavenExpand" title="Figure&nbsp;12.&nbsp;Route elements in Fuse JMX Navigator">Figure&nbsp;12, &#8220;Route elements in Fuse JMX Navigator&#8221;</a>).</p><div class="figure"><a name="RiderTutMavenExpand"></a><p class="title"><b>Figure&nbsp;12.&nbsp;Route elements in Fuse JMX Navigator</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/tutJMXNavigator.png" align="middle" width="289.25" alt="Route expansion in Fuse JMX Navigator"></div></div></div><br class="figure-break"></li><li class="step"><p>In <span class="guilabel">Fuse JMX Navigator</span>, select <span class="guimenuitem">Start
                        Tracing</span> from the <span class="guimenuitem">camel-1</span> node's
                    context menu.</p><p>The tooling displays a graphical representation of your route in
                        <span class="guilabel">Diagram View</span>.</p></li><li class="step"><p>In <span class="guilabel">Diagram View</span>, drag the nodes to rearrange them, so you
                    can clearly see the route's flow paths.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You will have to rearrange the nodes in <span class="guilabel">Diagram View</span>
                        each time you select a different node in <span class="guilabel">Fuse JMX
                            Navigator</span>.</p></td></tr></table></div></li><li class="step"><p>In <span class="guilabel">Project Explorer</span>, expand
                        <code class="code">simple-route/src/data</code>, so you can access the
                        <code class="code">message1.xml</code> and <code class="code">message2.xml</code> files as shown in
                        <a class="xref" href="RiderTutorialTrace.html#RiderTutDataExpand" title="Figure&nbsp;13.&nbsp;Message files in simple-route project">Figure&nbsp;13, &#8220;Message files in simple-route project&#8221;</a>.</p><div class="figure"><a name="RiderTutDataExpand"></a><p class="title"><b>Figure&nbsp;13.&nbsp;Message files in simple-route project</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/tutMsgFiles.jpg" align="middle" width="183.75" alt="Message source files in simple-route application"></div></div></div><br class="figure-break"></li><li class="step"><a name="msg1drag"></a><p>Drag <code class="code">message1.xml</code> and drop it on
                        <code class="code">.../camel-1/Endpoints/file/src/data?noop=true</code>.</p><p>As the message traverses the route, the tooling traces and records its passage
                    at each step and displays the results in <span class="guilabel">Messages
                    View</span>.</p></li><li class="step"><p>Repeat <a class="xref" href="RiderTutorialTrace.html#msg1drag" title="Step 9">Step 9</a>, but this
                    time drag <code class="code">message2.xml</code> and drop it on <code class="code">.../camel-1/Endpoints/file/src/data?noop=true</code>. </p></li><li class="step"><p>In the bottom, right panel, switch from <span class="guilabel">Console</span> to
                        <span class="guilabel">Messages View</span>.</p></li><li class="step"><p>In <span class="guilabel">Fuse JMX Navigator</span>, click
                        <span class="guimenuitem">camel-1</span> to populate <span class="guilabel">Messages
                        View</span> with the traces of each message.</p><p>As shown in <a class="xref" href="RiderTutorialTrace.html#TutMessageTrace" title="Figure&nbsp;14.&nbsp;Fuse Integration perspective's message tracing components">Figure&nbsp;14, &#8220;Fuse Integration perspective's message tracing components&#8221;</a>, the tooling draws the route in
                        <span class="guilabel">Diagram View</span>, tagging paths exiting a processing step
                    with timing and performance metrics. Only the metric <span class="guilabel">Total
                        exchanges</span> is displayed in the diagram. Hovering over the
                    displayed metrics reveals additional metrics about message flow:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>mean time the step took to process a message</p></li><li class="listitem"><p>maximum time the step took to process a message</p></li><li class="listitem"><p>minimum time the step took to process a message</p></li></ul></div><div class="figure"><a name="TutMessageTrace"></a><p class="title"><b>Figure&nbsp;14.&nbsp;Fuse Integration perspective's message tracing components</b></p><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="540"><tr><td align="center"><img src="images/FuseIntPerspUG.png" align="middle" width="540" alt="Message tracing in Fuse Integration perspective"></td></tr></table></div></div></div><br class="figure-break"></li><li class="step"><p>In <span class="guilabel">Messages View</span>, click a message instance.</p><p>The associated step in the route is highlighted in <span class="guilabel">Diagram
                        View</span>. You can step through the message instances to see how a
                    particular message traversed the route and whether it was processed as expected
                    at each step in the route.</p><p>The tooling displays the details about a message instance in the top half of
                    the <span class="guilabel">Properties</span> panel and the contents of the message
                    instance, including any headers, in the bottom half of the
                        <span class="guilabel">Properties</span> panel. So, if your application sets headers
                    at any step within a route, you can check whether they are set as
                    expected.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can control columnar layout in all of the tooling's tables. Use the
                        drag method to temporarily rearrange tabular format. For example, drag a
                        column's border rule to expand or contract its width. To hide a column,
                        totally contract its borders. Drag the column header to relocate a column
                        within the table. If you want your arrangement to persist, use the <span class="guimenu">View Menu</span> &gt; <span class="guisubmenu">Configure Columns...</span> method instead. To access it, click the <span class="inlinemediaobject"><img src="images/ViewmnuIcon.png" alt="View Menu icon"></span> icon on the panel's menu bar. </p></td></tr></table></div></li><li class="step"><p>When done, switch back to the <span class="guilabel">Console</span> and click the
                        <span class="guibutton">stop</span> button (<span class="inlinemediaobject"><img src="images/ConsoleStopButton.jpg" alt="Stop icon"></span>) in the upper, right side of its pane.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13541"></a>Next steps</h2></div></div></div><p>You can run the route with a JUnit test case, as described in <a class="xref" href="RiderTutorialJUnit.html" title="To Test a Route with JUnit"><i>To Test a Route with JUnit</i></a>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13548"></a>Further reading</h2></div></div></div><p>To learn more about message enrichment see:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the <code class="code">choice</code>, <code class="code">when</code>, and <code class="code">logEIP</code> Enterprise
                    Integration Patterns in <em class="citetitle">Red Hat JBoss Fuse: Implementing Enterprise
                        Integration Patterns</em> that comes with Red Hat JBoss Fuse. </p></li><li class="listitem"><p>the <a class="link" href="https://access.redhat.com/site/documentation/JBoss_Fuse/" target="_top">Red Hat JBoss
                        Fuse 6.x documentation library</a>
                </p></li></ul></div></div></div></body></html>